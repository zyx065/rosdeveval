repository: autoware
language: C++
ros_package_file: src/universe/autoware.universe/evaluator/autoware_localization_evaluator
ros_package: autoware_localization_evaluator
file_path: src/localization_evaluator_node.cpp
method_name: LocalizationEvaluatorNode::syncCallback
requirement: |
  /**
  * Synchronizes and evaluates localization metrics between odometry and ground truth pose messages.
  * 
  * @param[in] msg The odometry message containing the estimated pose to be evaluated.
  * @param[in] msg_ref The ground truth pose message used as a reference for evaluation.
  * 
  * @note Skips evaluation if either message contains a zero-position pose. Publishes diagnostic metrics
  *       if valid data is available.
  */
category: ros_architecture
type: has_message,has_publisher,has_logger,has_timer
signature: |
  void LocalizationEvaluatorNode::syncCallback(
    const Odometry::ConstSharedPtr & msg, const PoseWithCovarianceStamped::ConstSharedPtr & msg_ref)
additional_information: 
  function_related_variable:
    std::unordered_map<Metric, Accumulator<double>> metrics_dict_;
    std::vector<Metric> metrics_;
    std::array<std::deque<Accumulator<double>>, static_cast<size_t>(Metric::SIZE)> metric_stats_;
    std::deque<rclcpp::Time> stamps_;
  function_related_function: |
    DiagnosticStatus generateDiagnosticStatus(const Metric & metric, const Accumulator<double> & metric_stat) const
test: test_localization_evaluator
test_cases: 
- TestLateralErrorStats
- TestAbsoluteErrorStats