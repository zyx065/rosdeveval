repository: autoware
language: C++
ros_package_file: src/universe/autoware.universe/control/autoware_pid_longitudinal_controller
ros_package: autoware_obstacle_collision_checker
file_path: src/pid_longitudinal_controller.cpp
method_name: PidLongitudinalController::publishDebugData
requirement: |
  /**
  * Publishes debug data for the longitudinal controller including control commands and internal state.
  * @param ctrl_cmd The motion control command containing acceleration values.
  * @param control_data The current control data including timing, state, and vehicle information.
  */
category: ros_architecture
type: has_message,has_topic,has_timer
signature: |
  void PidLongitudinalController::publishDebugData(
    const Motion & ctrl_cmd, const ControlData & control_data)
additional_information: 
  function_related_variable: |
    DebugValues m_debug_values;
    rclcpp::Clock::SharedPtr clock_;
    rclcpp::Publisher<tier4_debug_msgs::msg::Float32MultiArrayStamped>::SharedPtr m_pub_debug;
    rclcpp::Publisher<tier4_debug_msgs::msg::Float32MultiArrayStamped>::SharedPtr m_pub_slope;
  function_related_class: |
    class DebugValues
    {
    public:
      enum class TYPE {
        DT = 0,
        CURRENT_VEL = 1,
        TARGET_VEL = 2,
        TARGET_ACC = 3,
        NEAREST_VEL = 4,
        NEAREST_ACC = 5,
        SHIFT = 6,
        PITCH_LPF_RAD = 7,
        PITCH_RAW_RAD = 8,
        PITCH_LPF_DEG = 9,
        PITCH_RAW_DEG = 10,
        ERROR_VEL = 11,
        ERROR_VEL_FILTERED = 12,
        CONTROL_STATE = 13,
        ACC_CMD_PID_APPLIED = 14,
        ACC_CMD_ACC_LIMITED = 15,
        ACC_CMD_JERK_LIMITED = 16,
        ACC_CMD_SLOPE_APPLIED = 17,
        ACC_CMD_PUBLISHED = 18,
        ACC_CMD_FB_P_CONTRIBUTION = 19,
        ACC_CMD_FB_I_CONTRIBUTION = 20,
        ACC_CMD_FB_D_CONTRIBUTION = 21,
        FLAG_STOPPING = 22,
        FLAG_EMERGENCY_STOP = 23,
        PREDICTED_VEL = 24,
        CALCULATED_ACC = 25,
        PITCH_RAW_TRAJ_RAD = 26,
        PITCH_RAW_TRAJ_DEG = 27,
        STOP_DIST = 28,
        FF_SCALE = 29,
        ACC_CMD_FF = 30,
        ERROR_ACC = 31,
        ERROR_ACC_FILTERED = 32,
        ACC_CMD_ACC_FB_APPLIED = 33,

        SIZE  // this is the number of enum elements
      };

      size_t getValuesIdx(const TYPE type) const { return static_cast<size_t>(type); }
      std::array<double, static_cast<size_t>(TYPE::SIZE)> getValues() const { return m_values; }
      void setValues(const TYPE type, const double value)
      {
        m_values.at(static_cast<size_t>(type)) = value;
      }
      void setValues(const size_t type, const double value) { m_values.at(type) = value; }
    private:
      std::array<double, static_cast<size_t>(TYPE::SIZE)> m_values;
    };
test: test_longitudinal_controller
test_cases: []