repository: moveit2
language: C++
ros_package_file: moveit_ros/moveit_servo
ros_package: moveit_servo
file_path: src/servo_calcs.cpp
method_name: ServoCalcs::twistStampedCB
requirement: |
  /**
  * Callback for incoming TwistStamped commands.
  *
  * Stores the latest twist command and updates the command timestamp. Notifies waiting threads
  * that a new input command has been received.
  *
  * @param[in] msg Shared pointer to the incoming TwistStamped message containing velocity command.
  */
category: ros_architecture
type: has_timer,has_message,has_parameter
signature: |
  void ServoCalcs::twistStampedCB(const geometry_msgs::msg::TwistStamped::ConstSharedPtr& msg)
additional_information: 
  function_related_variable: |
    mutable std::mutex main_loop_mutex_;
    geometry_msgs::msg::TwistStamped::ConstSharedPtr latest_twist_stamped_;
    rclcpp::Time latest_joint_command_stamp_ = rclcpp::Time(0., RCL_ROS_TIME);
    bool new_input_cmd_ = false;
    std::condition_variable input_cv_;
  function_related_function: |
    // Helper function for detecting zeroed message
    bool isNonZero(const geometry_msgs::msg::TwistStamped& msg);
test: servo_calcs_unit_tests
test_cases: []