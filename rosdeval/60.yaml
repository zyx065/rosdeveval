repository: autoware
language: C++
ros_package_file: src/universe/autoware.universe/planning/autoware_velocity_smoother
ros_package: autoware_planning_evaluator
file_path: src/node.cpp
method_name: VelocitySmootherNode::VelocitySmootherNode
requirement: |
  /**
  * @brief Constructs a VelocitySmootherNode for smoothing trajectory velocities.
  * 
  * Initializes the ROS 2 node, configures parameters, sets up publishers/subscribers,
  * and prepares the velocity smoothing algorithm with vehicle-specific parameters.
  * 
  * @param node_options Configuration options for the ROS 2 node
  */
category: ros_architecture
type: has_topic,has_parameter,has_timer,has_message
signature: |
  VelocitySmootherNode::VelocitySmootherNode(const rclcpp::NodeOptions & node_options)
  : Node("velocity_smoother", node_options),
    diagnostics_interface_(std::make_unique<DiagnosticsInterface>(this, "velocity_smoother"))
additional_information: 
  function_related_variable: |
    rclcpp::Publisher<Float32Stamped>::SharedPtr pub_dist_to_stopline_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_trajectory_raw_;
    rclcpp::Publisher<VelocityLimit>::SharedPtr pub_velocity_limit_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_trajectory_vel_lim_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_trajectory_latacc_filtered_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_trajectory_steering_rate_limited_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_trajectory_resampled_;
    rclcpp::Publisher<Float32Stamped>::SharedPtr debug_closest_velocity_;
    rclcpp::Publisher<Float32Stamped>::SharedPtr debug_closest_acc_;
    rclcpp::Publisher<Float32Stamped>::SharedPtr debug_closest_jerk_;
    rclcpp::Publisher<Float64Stamped>::SharedPtr debug_calculation_time_;
    rclcpp::Publisher<Float32Stamped>::SharedPtr debug_closest_max_velocity_;
    rclcpp::Publisher<autoware::universe_utils::ProcessingTimeDetail>::SharedPtr debug_processing_time_detail_;
    mutable std::shared_ptr<autoware::universe_utils::TimeKeeper> time_keeper_{nullptr};
    double over_stop_velocity_warn_thr_;  // threshold to publish over velocity warn
    double wheelbase_;                              // wheelbase
    double base_link2front_;                        // base_link to front
    OnSetParametersCallbackHandle::SharedPtr set_param_res_;
    bool publish_debug_trajs_;  // publish planned trajectories
    rclcpp::Publisher<Trajectory>::SharedPtr pub_forward_filtered_trajectory_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_backward_filtered_trajectory_;
    rclcpp::Publisher<Trajectory>::SharedPtr pub_merged_filtered_trajectory_;
    rclcpp::Publisher<Float32Stamped>::SharedPtr pub_closest_merged_velocity_;
    ExternalVelocityLimit external_velocity_limit_;
    double max_velocity_with_deceleration_;
    mutable rclcpp::Clock::SharedPtr clock_;
    std::unique_ptr<autoware::universe_utils::LoggerLevelConfigure> logger_configure_;
    std::unique_ptr<autoware::universe_utils::PublishedTimePublisher> published_time_publisher_;
  function_related_function: |
    void initCommonParam();
    void setupSmoother(const double wheelbase);
test: test_autoware_velocity_smoother
test_cases: []