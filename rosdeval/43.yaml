repository: autoware
language: C++
ros_package_file: src/universe/autoware.universe/planning/autoware_freespace_planner
ros_package: autoware_kinematic_evaluator
file_path: src/autoware_freespace_planner/freespace_planner_node.cpp
method_name: FreespacePlannerNode::FreespacePlannerNode
requirement: |
  /**
  * @brief Constructs a FreespacePlannerNode for autonomous vehicle path planning in open areas.
  * 
  * @param node_options Configuration options for initializing the ROS 2 node
  */
category: ros_architecture
type: has_parameter,has_topic,has_timer,has_logger,has_domain_library
signature: |
  FreespacePlannerNode::FreespacePlannerNode(const rclcpp::NodeOptions & node_options)
  : Node("freespace_planner", node_options)
additional_information: 
  function_related_variable: |
    NodeParam node_param_;
    VehicleShape vehicle_shape_;
    rclcpp::Subscription<LaneletRoute>::SharedPtr route_sub_;
    rclcpp::Publisher<Trajectory>::SharedPtr trajectory_pub_;
    rclcpp::Publisher<PoseArray>::SharedPtr debug_pose_array_pub_;
    rclcpp::Publisher<PoseArray>::SharedPtr debug_partial_pose_array_pub_;
    rclcpp::Publisher<std_msgs::msg::Bool>::SharedPtr parking_state_pub_;
    rclcpp::Publisher<tier4_debug_msgs::msg::Float64Stamped>::SharedPtr processing_time_pub_;
    std::shared_ptr<tf2_ros::Buffer> tf_buffer_;
    std::shared_ptr<tf2_ros::TransformListener> tf_listener_;
    rclcpp::TimerBase::SharedPtr timer_;
    std::unique_ptr<autoware::universe_utils::LoggerLevelConfigure> logger_configure_;
  function_related_function: |
    void initializePlanningAlgorithm();
    void onRoute(const LaneletRoute::ConstSharedPtr msg);
    void onTimer();
  function_related_class: |
    struct NodeParam
    {
      std::string planning_algorithm;
      double waypoints_velocity;  // constant velocity on planned waypoints [km/h]
      double update_rate;         // replanning and publishing rate [Hz]
      double th_arrived_distance_m;
      double th_stopped_time_sec;
      double th_stopped_velocity_mps;
      double th_course_out_distance_m;  // collision margin [m]
      double th_obstacle_time_sec;
      double vehicle_shape_margin_m;
      bool replan_when_obstacle_found;
      bool replan_when_course_out;
    };
    struct VehicleShape
    {
      double length;  // X [m]
      double width;   // Y [m]
      double base_length;
      double max_steering;
      double base2back;  // base_link to rear [m]
      double min_dimension;
      double max_dimension;
    }
test: test_autoware_freespace_planner
test_cases: []