compilation.log: |
  Starting >>> autoware_ground_segmentation
  --- stderr: autoware_ground_segmentation
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp: In constructor ‘autoware::ground_segmentation::ScanGroundFilterComponent::ScanGroundFilterComponent(const rclcpp::NodeOptions&)’:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp:186:9: error: ‘autoware::ground_segmentation::ScanGroundFilterComponent::detection_range_z_max_’ will be initialized after [-Werror=reorder]
    186 |   float detection_range_z_max_;
        |         ^~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp:162:9: error:   ‘float autoware::ground_segmentation::ScanGroundFilterComponent::low_priority_region_x_’ [-Werror=reorder]
    162 |   float low_priority_region_x_;
        |         ^~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:38:1: error:   when initialized here [-Werror=reorder]
     38 | ScanGroundFilterComponent::ScanGroundFilterComponent(const rclcpp::NodeOptions & options)
        | ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp:163:9: error: ‘autoware::ground_segmentation::ScanGroundFilterComponent::center_pcl_shift_’ will be initialized after [-Werror=reorder]
    163 |   float center_pcl_shift_;  // virtual center of pcl to center mass
        |         ^~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp:161:9: error:   ‘float autoware::ground_segmentation::ScanGroundFilterComponent::non_ground_height_threshold_’ [-Werror=reorder]
    161 |   float non_ground_height_threshold_;
        |         ^~~~~~~~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:38:1: error:   when initialized here [-Werror=reorder]
     38 | ScanGroundFilterComponent::ScanGroundFilterComponent(const rclcpp::NodeOptions & options)
        | ^~~~~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:70:17: error: ‘using element_type = class autoware::universe_utils::TimeKeeper’ {aka ‘class autoware::universe_utils::TimeKeeper’} has no member named ‘setLoggerName’
     70 |   time_keeper_->setLoggerName(std::string(this->get_name()) + ": time_keeper");
        |                 ^~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:71:17: error: ‘using element_type = class autoware::universe_utils::TimeKeeper’ {aka ‘class autoware::universe_utils::TimeKeeper’} has no member named ‘initialize’
     71 |   time_keeper_->initialize(5, 0.5);
        |                 ^~~~~~~~~~
  In file included from /usr/include/c++/11/memory:76,
                   from /opt/ros/humble/include/sensor_msgs/sensor_msgs/msg/detail/point_cloud2__struct.hpp:10,
                   from /opt/ros/humble/include/sensor_msgs/sensor_msgs/msg/point_cloud2.hpp:7,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/data.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:15:
  /usr/include/c++/11/bits/unique_ptr.h: In instantiation of ‘typename std::_MakeUniq<_Tp>::__single_object std::make_unique(_Args&& ...) [with _Tp = autoware::ground_segmentation::GridGroundFilter; _Args = {}; typename std::_MakeUniq<_Tp>::__single_object = std::unique_ptr<autoware::ground_segmentation::GridGroundFilter>]’:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:78:63:   required from here
  /usr/include/c++/11/bits/unique_ptr.h:962:30: error: no matching function for call to ‘autoware::ground_segmentation::GridGroundFilter::GridGroundFilter()’
    962 |     { return unique_ptr<_Tp>(new _Tp(std::forward<_Args>(__args)...)); }
        |                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.hpp:19,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/grid_ground_filter.hpp:156:12: note: candidate: ‘autoware::ground_segmentation::GridGroundFilter::GridGroundFilter(autoware::ground_segmentation::GridGroundFilterParameter&)’
    156 |   explicit GridGroundFilter(GridGroundFilterParameter & param) : param_(param)
        |            ^~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_ground_segmentation/src/scan_ground_filter/grid_ground_filter.hpp:156:12: note:   candidate expects 1 argument, 0 provided
  cc1plus: all warnings being treated as errors
  gmake[2]: *** [CMakeFiles/autoware_ground_segmentation.dir/build.make:104: CMakeFiles/autoware_ground_segmentation.dir/src/scan_ground_filter/node.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:167: CMakeFiles/autoware_ground_segmentation.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_ground_segmentation [10.6s, exited with code 2]

  Summary: 0 packages finished [12.1s]
    1 package failed: autoware_ground_segmentation
    1 package had stderr output: autoware_ground_segmentation
generate_code.cpp: |-
  ScanGroundFilterComponent::ScanGroundFilterComponent(const rclcpp::NodeOptions & options)
  : autoware::pointcloud_preprocessor::Filter("ScanGroundFilter", options),
    elevation_grid_mode_(false),
    radial_divider_angle_rad_(0.0f),
    radial_dividers_num_(0),
    global_slope_max_angle_rad_(0.0f),
    local_slope_max_angle_rad_(0.0f),
    global_slope_max_ratio_(0.0f),
    local_slope_max_ratio_(0.0f),
    split_points_distance_tolerance_(0.0f),
    use_virtual_ground_point_(false),
    split_height_distance_(0.0f),
    use_recheck_ground_cluster_(false),
    use_lowest_point_(false),
    detection_range_z_max_(0.0f),
    low_priority_region_x_(0.0f),
    center_pcl_shift_(0.0f),
    non_ground_height_threshold_(0.0f),
    grid_size_m_(0.0f),
    grid_mode_switch_radius_(0.0f),
    gnd_grid_buffer_size_(0),
    virtual_lidar_z_(0.0f)
  {
    // Initialize vehicle info
    vehicle_info_ = autoware::vehicle_info_utils::VehicleInfoUtils(*this).getVehicleInfo();

    // Initialize stop watch and debug publisher
    stop_watch_ptr_ = std::make_unique<autoware::universe_utils::StopWatch<std::chrono::milliseconds>>();
    debug_publisher_ptr_ = std::make_unique<autoware::universe_utils::DebugPublisher>(this, "scan_ground_filter");

    // Initialize time keeper
    time_keeper_ = std::make_shared<autoware::universe_utils::TimeKeeper>();
    time_keeper_->setLoggerName(std::string(this->get_name()) + ": time_keeper");
    time_keeper_->initialize(5, 0.5);

    // Initialize detailed processing time publisher
    detailed_processing_time_publisher_ = this->create_publisher<autoware::universe_utils::ProcessingTimeDetail>(
      "~/debug/processing_time_detail", 1);

    // Initialize grid ground filter
    grid_ground_filter_ptr_ = std::make_unique<GridGroundFilter>();
  }
ground_truth.cpp: |-
  ScanGroundFilterComponent::ScanGroundFilterComponent(const rclcpp::NodeOptions & options)
  : autoware::pointcloud_preprocessor::Filter("ScanGroundFilter", options)
  {
    // set initial parameters
    {
      // modes
      elevation_grid_mode_ = declare_parameter<bool>("elevation_grid_mode");

      // common parameters
      radial_divider_angle_rad_ =
        static_cast<float>(deg2rad(declare_parameter<double>("radial_divider_angle_deg")));
      radial_dividers_num_ = std::ceil(2.0 * M_PI / radial_divider_angle_rad_);

      // common thresholds
      global_slope_max_angle_rad_ =
        static_cast<float>(deg2rad(declare_parameter<double>("global_slope_max_angle_deg")));
      local_slope_max_angle_rad_ =
        static_cast<float>(deg2rad(declare_parameter<double>("local_slope_max_angle_deg")));
      global_slope_max_ratio_ = std::tan(global_slope_max_angle_rad_);
      local_slope_max_ratio_ = std::tan(local_slope_max_angle_rad_);
      split_points_distance_tolerance_ =
        static_cast<float>(declare_parameter<double>("split_points_distance_tolerance"));

      // vehicle info
      vehicle_info_ = VehicleInfoUtils(*this).getVehicleInfo();

      // non-grid parameters
      use_virtual_ground_point_ = declare_parameter<bool>("use_virtual_ground_point");
      split_height_distance_ = static_cast<float>(declare_parameter<double>("split_height_distance"));

      // grid mode parameters
      use_recheck_ground_cluster_ = declare_parameter<bool>("use_recheck_ground_cluster");
      use_lowest_point_ = declare_parameter<bool>("use_lowest_point");
      detection_range_z_max_ = static_cast<float>(declare_parameter<double>("detection_range_z_max"));
      low_priority_region_x_ = static_cast<float>(declare_parameter<double>("low_priority_region_x"));
      center_pcl_shift_ = static_cast<float>(declare_parameter<double>("center_pcl_shift"));
      non_ground_height_threshold_ =
        static_cast<float>(declare_parameter<double>("non_ground_height_threshold"));

      // grid parameters
      grid_size_m_ = static_cast<float>(declare_parameter<double>("grid_size_m"));
      grid_mode_switch_radius_ =
        static_cast<float>(declare_parameter<double>("grid_mode_switch_radius"));
      gnd_grid_buffer_size_ = declare_parameter<int>("gnd_grid_buffer_size");
      virtual_lidar_z_ = vehicle_info_.vehicle_height_m;

      // initialize grid filter
      {
        GridGroundFilterParameter param;
        param.global_slope_max_angle_rad = global_slope_max_angle_rad_;
        param.local_slope_max_angle_rad = local_slope_max_angle_rad_;
        param.radial_divider_angle_rad = radial_divider_angle_rad_;

        param.use_recheck_ground_cluster = use_recheck_ground_cluster_;
        param.use_lowest_point = use_lowest_point_;
        param.detection_range_z_max = detection_range_z_max_;
        param.non_ground_height_threshold = non_ground_height_threshold_;

        param.grid_size_m = grid_size_m_;
        param.grid_mode_switch_radius = grid_mode_switch_radius_;
        param.gnd_grid_buffer_size = gnd_grid_buffer_size_;
        param.virtual_lidar_x = vehicle_info_.wheel_base_m / 2.0f + center_pcl_shift_;
        param.virtual_lidar_y = 0.0f;
        param.virtual_lidar_z = virtual_lidar_z_;

        grid_ground_filter_ptr_ = std::make_unique<GridGroundFilter>(param);
      }
    }

    using std::placeholders::_1;
    set_param_res_ = this->add_on_set_parameters_callback(
      std::bind(&ScanGroundFilterComponent::onParameter, this, _1));

    // initialize debug tool
    {
      using autoware::universe_utils::DebugPublisher;
      using autoware::universe_utils::StopWatch;
      stop_watch_ptr_ = std::make_unique<StopWatch<std::chrono::milliseconds>>();
      debug_publisher_ptr_ = std::make_unique<DebugPublisher>(this, "scan_ground_filter");
      stop_watch_ptr_->tic("cyclic_time");
      stop_watch_ptr_->tic("processing_time");

      bool use_time_keeper = declare_parameter<bool>("publish_processing_time_detail");
      if (use_time_keeper) {
        detailed_processing_time_publisher_ =
          this->create_publisher<autoware::universe_utils::ProcessingTimeDetail>(
            "~/debug/processing_time_detail_ms", 1);
        auto time_keeper = autoware::universe_utils::TimeKeeper(detailed_processing_time_publisher_);
        time_keeper_ = std::make_shared<autoware::universe_utils::TimeKeeper>(time_keeper);

        // set time keeper to grid
        grid_ground_filter_ptr_->setTimeKeeper(time_keeper_);
      }
    }
  }
architecture-codes:
  - ROS Parameter Issue - Use Non-existent Parameter Issue
  - ROS Parameter Issue - Insufficient Parameter Design Issue
  - ROS Parameter Issue - Missing Dynamic Configuration Issue
  - Topic/Service Issue - Topic/Service Name Mismatch Issue
  - ROS Logger Issue - ROS Logger Missing Issue

functionality-codes:
  - Incomplete Code Issue - Missing Multiple Steps Issue
  - Domain Library Issue - Domain Specific Library Utilization Error
  - Condition Issue - Conditional Check Missing Issue
  - Constant Value Issue

root-cause-codes:
  - Framework Integration Issue - Insufficient understanding of ROS Integration
  - Framework Integration Issue - Lack of ROS development best practices
  - Solving Robotic Tasks Issue - Inadequate Understanding of System Requirements
  - Solving Robotic Tasks Issue - Inadequate Understanding of Existing Codebase 