compilation.log: |
  Starting >>> autoware_external_cmd_converter
  --- stderr: autoware_external_cmd_converter
  /workspace/repos/autoware/src/universe/autoware.universe/vehicle/autoware_external_cmd_converter/src/node.cpp: In constructor ‘autoware::external_cmd_converter::ExternalCmdConverterNode::ExternalCmdConverterNode(const rclcpp::NodeOptions&)’:
  /workspace/repos/autoware/src/universe/autoware.universe/vehicle/autoware_external_cmd_converter/src/node.cpp:64:3: error: ‘timer_’ was not declared in this scope; did you mean ‘timer_t’?
     64 |   timer_ = create_wall_timer(
        |   ^~~~~~
        |   timer_t
  /workspace/repos/autoware/src/universe/autoware.universe/vehicle/autoware_external_cmd_converter/src/node.cpp:69:77: error: ‘checkTopicStatus’ is not a member of ‘autoware::external_cmd_converter::ExternalCmdConverterNode’
     69 |   updater_.add("command_converter_status", this, &ExternalCmdConverterNode::checkTopicStatus);
        |                                                                             ^~~~~~~~~~~~~~~~
  gmake[2]: *** [CMakeFiles/autoware_external_cmd_converter.dir/build.make:76: CMakeFiles/autoware_external_cmd_converter.dir/src/node.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:159: CMakeFiles/autoware_external_cmd_converter.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_external_cmd_converter [7.67s, exited with code 2]

  Summary: 0 packages finished [8.95s]
    1 package failed: autoware_external_cmd_converter
    1 package had stderr output: autoware_external_cmd_converter
generate_code.cpp: "ExternalCmdConverterNode::ExternalCmdConverterNode(const rclcpp::NodeOptions\
  \ & node_options)\n: Node(\"external_cmd_converter\", node_options)\n{\n  // Parameters\n\
  \  ref_vel_gain_ = declare_parameter<double>(\"ref_vel_gain\", 0.5);\n  wait_for_first_topic_\
  \ = declare_parameter<bool>(\"wait_for_first_topic\", false);\n  control_command_timeout_\
  \ = declare_parameter<double>(\"control_command_timeout\", 1.0);\n  emergency_stop_timeout_\
  \ = declare_parameter<double>(\"emergency_stop_timeout\", 0.5);\n\n  // Initialize\
  \ accel/brake maps\n  const auto accel_map_path = declare_parameter<std::string>(\"\
  accel_map_path\");\n  const auto brake_map_path = declare_parameter<std::string>(\"\
  brake_map_path\");\n  acc_map_initialized_ = accel_map_.readAccelMapFromCSV(accel_map_path)\
  \ && \n                         brake_map_.readBrakeMapFromCSV(brake_map_path);\n\
  \n  if (!acc_map_initialized_) {\n    RCLCPP_ERROR(get_logger(), \"Failed to read\
  \ accel/brake map. Shutting down node.\");\n    rclcpp::shutdown();\n    return;\n\
  \  }\n\n  // Publishers\n  cmd_pub_ = create_publisher<Control>(\"output/control_cmd\"\
  , rclcpp::QoS{1});\n  current_cmd_pub_ = create_publisher<tier4_external_api_msgs::msg::ControlCommandStamped>(\n\
  \    \"output/current_external_control_cmd\", rclcpp::QoS{1});\n\n  // Subscribers\n\
  \  control_cmd_sub_ = create_subscription<tier4_external_api_msgs::msg::ControlCommandStamped>(\n\
  \    \"input/external_control_cmd\", rclcpp::QoS{1},\n    std::bind(&ExternalCmdConverterNode::on_external_cmd,\
  \ this, std::placeholders::_1));\n  \n  emergency_stop_heartbeat_sub_ = create_subscription<tier4_external_api_msgs::msg::Heartbeat>(\n\
  \    \"input/emergency_stop_heartbeat\", rclcpp::QoS{1},\n    std::bind(&ExternalCmdConverterNode::on_emergency_stop_heartbeat,\
  \ this, std::placeholders::_1));\n\n  // Timer\n  const auto period_ns = std::chrono::duration_cast<std::chrono::nanoseconds>(\n\
  \    std::chrono::duration<double>(0.02));\n  timer_ = create_wall_timer(\n    period_ns,\
  \ std::bind(&ExternalCmdConverterNode::on_timer, this));\n\n  // Diagnostic Updater\n\
  \  updater_.setHardwareID(\"external_cmd_converter\");\n  updater_.add(\"command_converter_status\"\
  , this, &ExternalCmdConverterNode::checkTopicStatus);\n}"
ground_truth.cpp: |-
  ExternalCmdConverterNode::ExternalCmdConverterNode(const rclcpp::NodeOptions & node_options)
  : Node("external_cmd_converter", node_options)
  {
    using std::placeholders::_1;

    cmd_pub_ = create_publisher<Control>("out/control_cmd", rclcpp::QoS{1});
    current_cmd_pub_ =
      create_publisher<ExternalControlCommand>("out/latest_external_control_cmd", rclcpp::QoS{1});
    control_cmd_sub_ = create_subscription<ExternalControlCommand>(
      "in/external_control_cmd", 1, std::bind(&ExternalCmdConverterNode::on_external_cmd, this, _1));
    emergency_stop_heartbeat_sub_ = create_subscription<tier4_external_api_msgs::msg::Heartbeat>(
      "in/emergency_stop", 1,
      std::bind(&ExternalCmdConverterNode::on_emergency_stop_heartbeat, this, _1));

    // Parameter
    ref_vel_gain_ = declare_parameter<double>("ref_vel_gain");

    // Parameter for Hz check
    const double timer_rate = declare_parameter<double>("timer_rate");
    wait_for_first_topic_ = declare_parameter<bool>("wait_for_first_topic");
    control_command_timeout_ = declare_parameter<double>("control_command_timeout");
    emergency_stop_timeout_ = declare_parameter<double>("emergency_stop_timeout");

    const auto period_ns = rclcpp::Rate(timer_rate).period();
    rate_check_timer_ = rclcpp::create_timer(
      this, get_clock(), period_ns, std::bind(&ExternalCmdConverterNode::on_timer, this));

    // Parameter for accel/brake map
    const std::string csv_path_accel_map = declare_parameter<std::string>("csv_path_accel_map");
    const std::string csv_path_brake_map = declare_parameter<std::string>("csv_path_brake_map");
    acc_map_initialized_ = true;
    if (!accel_map_.readAccelMapFromCSV(csv_path_accel_map)) {
      RCLCPP_ERROR(
        get_logger(), "Cannot read accelmap. csv path = %s. stop calculation.",
        csv_path_accel_map.c_str());
      acc_map_initialized_ = false;
    }
    if (!brake_map_.readBrakeMapFromCSV(csv_path_brake_map)) {
      RCLCPP_ERROR(
        get_logger(), "Cannot read brakemap. csv path = %s. stop calculation.",
        csv_path_brake_map.c_str());
      acc_map_initialized_ = false;
    }

    // Diagnostics
    updater_.setHardwareID("external_cmd_converter");
    updater_.add("remote_control_topic_status", this, &ExternalCmdConverterNode::check_topic_status);

    // Set default values
    current_shift_cmd_ = std::make_shared<GearCommand>();
  }
architecture-codes:
  - Topic/Service Issue - Topic/Service Name Mismatch Issue
  - ROS Parameter Issue - Use Non-existent Parameter Issue
  - ROS Parameter Issue - Insufficient Parameter Design Issue
  - ROS Timer Issue - Clock Source Usage Issue
  - ROS Diagnostic Issue - ROS Diagnostic API Misuse Issue

functionality-codes:
  - Condition Issue - Condition Check Logic Misapplication Issue
  - Incomplete Code Issue - Missing Multiple Steps Issue

root-cause-codes:
  - Solving Robotic Tasks Issue - Inadequate Understanding of System Requirements
  - Framework Integration Issue - Insufficient understanding of ROS Integration
  - Framework Integration Issue - Lack of ROS development best practices
  - Solving Robotic Tasks Issue - Inadequate Understanding of Existing Codebase 