compilation.log: |
  Starting >>> moveit_servo
  --- stderr: moveit_servo
  In file included from /usr/include/x86_64-linux-gnu/c++/11/bits/c++allocator.h:33,
                   from /usr/include/c++/11/bits/allocator.h:46,
                   from /usr/include/c++/11/memory:64,
                   from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo.h:42,
                   from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_node.h:43,
                   from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/src/servo_node.cpp:40:
  /usr/include/c++/11/ext/new_allocator.h: In instantiation of ‘void __gnu_cxx::new_allocator<_Tp>::construct(_Up*, _Args&& ...) [with _Up = moveit_servo::ServoParameters; _Args = {std::shared_ptr<rclcpp::Node>&}; _Tp = moveit_servo::ServoParameters]’:
  /usr/include/c++/11/bits/alloc_traits.h:516:17:   required from ‘static void std::allocator_traits<std::allocator<_Tp1> >::construct(std::allocator_traits<std::allocator<_Tp1> >::allocator_type&, _Up*, _Args&& ...) [with _Up = moveit_servo::ServoParameters; _Args = {std::shared_ptr<rclcpp::Node>&}; _Tp = moveit_servo::ServoParameters; std::allocator_traits<std::allocator<_Tp1> >::allocator_type = std::allocator<moveit_servo::ServoParameters>]’
  /usr/include/c++/11/bits/shared_ptr_base.h:519:39:   required from ‘std::_Sp_counted_ptr_inplace<_Tp, _Alloc, _Lp>::_Sp_counted_ptr_inplace(_Alloc, _Args&& ...) [with _Args = {std::shared_ptr<rclcpp::Node>&}; _Tp = moveit_servo::ServoParameters; _Alloc = std::allocator<moveit_servo::ServoParameters>; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr_base.h:650:16:   required from ‘std::__shared_count<_Lp>::__shared_count(_Tp*&, std::_Sp_alloc_shared_tag<_Alloc>, _Args&& ...) [with _Tp = moveit_servo::ServoParameters; _Alloc = std::allocator<moveit_servo::ServoParameters>; _Args = {std::shared_ptr<rclcpp::Node>&}; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr_base.h:1342:14:   required from ‘std::__shared_ptr<_Tp, _Lp>::__shared_ptr(std::_Sp_alloc_shared_tag<_Tp>, _Args&& ...) [with _Alloc = std::allocator<moveit_servo::ServoParameters>; _Args = {std::shared_ptr<rclcpp::Node>&}; _Tp = moveit_servo::ServoParameters; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr.h:409:59:   required from ‘std::shared_ptr<_Tp>::shared_ptr(std::_Sp_alloc_shared_tag<_Tp>, _Args&& ...) [with _Alloc = std::allocator<moveit_servo::ServoParameters>; _Args = {std::shared_ptr<rclcpp::Node>&}; _Tp = moveit_servo::ServoParameters]’
  /usr/include/c++/11/bits/shared_ptr.h:862:14:   required from ‘std::shared_ptr<_Tp> std::allocate_shared(const _Alloc&, _Args&& ...) [with _Tp = moveit_servo::ServoParameters; _Alloc = std::allocator<moveit_servo::ServoParameters>; _Args = {std::shared_ptr<rclcpp::Node>&}]’
  /usr/include/c++/11/bits/shared_ptr.h:878:39:   required from ‘std::shared_ptr<_Tp> std::make_shared(_Args&& ...) [with _Tp = moveit_servo::ServoParameters; _Args = {std::shared_ptr<rclcpp::Node>&}]’
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/src/servo_node.cpp:51:74:   required from here
  /usr/include/c++/11/ext/new_allocator.h:162:11: error: no matching function for call to ‘moveit_servo::ServoParameters::ServoParameters(std::shared_ptr<rclcpp::Node>&)’
    162 |         { ::new((void *)__p) _Up(std::forward<_Args>(__args)...); }
        |           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/collision_check.h:50,
                   from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo.h:45,
                   from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_node.h:43,
                   from /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/src/servo_node.cpp:40:
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_parameters.h:148:3: note: candidate: ‘moveit_servo::ServoParameters::ServoParameters()’
    148 |   ServoParameters()
        |   ^~~~~~~~~~~~~~~
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_parameters.h:148:3: note:   candidate expects 0 arguments, 1 provided
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_parameters.h:52:8: note: candidate: ‘moveit_servo::ServoParameters::ServoParameters(const moveit_servo::ServoParameters&)’
     52 | struct ServoParameters
        |        ^~~~~~~~~~~~~~~
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_parameters.h:52:8: note:   no known conversion for argument 1 from ‘std::shared_ptr<rclcpp::Node>’ to ‘const moveit_servo::ServoParameters&’
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_parameters.h:52:8: note: candidate: ‘moveit_servo::ServoParameters::ServoParameters(moveit_servo::ServoParameters&&)’
  /root/repos/moveit_ws/src/moveit2/moveit_ros/moveit_servo/include/moveit_servo/servo_parameters.h:52:8: note:   no known conversion for argument 1 from ‘std::shared_ptr<rclcpp::Node>’ to ‘moveit_servo::ServoParameters&&’
  gmake[2]: *** [CMakeFiles/servo_node.dir/build.make:76: CMakeFiles/servo_node.dir/src/servo_node.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:257: CMakeFiles/servo_node.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< moveit_servo [7.93s, exited with code 2]

  Summary: 0 packages finished [8.52s]
    1 package failed: moveit_servo
    1 package had stderr output: moveit_servo
generate_code.cpp: "ServoNode::ServoNode(const rclcpp::NodeOptions& options)\n  :\
  \ node_{ std::make_shared<rclcpp::Node>(\"servo_node\", options) }\n{\n  // Load\
  \ parameters\n  auto servo_parameters = std::make_shared<moveit_servo::ServoParameters>(node_);\n\
  \  \n  // Initialize planning scene monitor\n  planning_scene_monitor_ = std::make_shared<planning_scene_monitor::PlanningSceneMonitor>(\n\
  \      node_, \"robot_description\", \n      servo_parameters->is_primary_planning_scene_monitor\
  \ ? \"\" : servo_parameters->monitored_planning_scene_topic);\n  \n  // Configure\
  \ planning scene monitor\n  planning_scene_monitor_->startStateMonitor();\n  planning_scene_monitor_->startSceneMonitor();\n\
  \  planning_scene_monitor_->startWorldGeometryMonitor();\n  planning_scene_monitor_->setPlanningScenePublishingFrequency(25);\n\
  \  planning_scene_monitor_->getStateMonitor()->enableCopyDynamics(true);\n  planning_scene_monitor_->startPublishingPlanningScene(planning_scene_monitor::PlanningSceneMonitor::UPDATE_SCENE,\n\
  \                                                       servo_parameters->monitored_planning_scene_topic);\n\
  \  planning_scene_monitor_->providePlanningSceneService();\n  planning_scene_monitor_->requestPlanningSceneState();\n\
  \  \n  // Initialize Servo instance\n  servo_ = std::make_unique<moveit_servo::Servo>(node_,\
  \ servo_parameters, planning_scene_monitor_);\n}"
ground_truth.cpp: |-
  ServoNode::ServoNode(const rclcpp::NodeOptions& options)
    : node_{ std::make_shared<rclcpp::Node>("servo_node", options) }
  {
    if (!options.use_intra_process_comms())
    {
      RCLCPP_WARN_STREAM(LOGGER, "Intra-process communication is disabled, consider enabling it by adding: "
                                 "\nextra_arguments=[{'use_intra_process_comms' : True}]\nto the Servo composable node "
                                 "in the launch file");
    }

    // Set up services for interacting with Servo
    start_servo_service_ = node_->create_service<std_srvs::srv::Trigger>(
        "~/start_servo",
        [this](const std::shared_ptr<std_srvs::srv::Trigger::Request>& request,
               const std::shared_ptr<std_srvs::srv::Trigger::Response>& response) { return startCB(request, response); });
    stop_servo_service_ = node_->create_service<std_srvs::srv::Trigger>(
        "~/stop_servo",
        [this](const std::shared_ptr<std_srvs::srv::Trigger::Request>& request,
               const std::shared_ptr<std_srvs::srv::Trigger::Response>& response) { return stopCB(request, response); });
    pause_servo_service_ = node_->create_service<std_srvs::srv::Trigger>(
        "~/pause_servo",
        [this](const std::shared_ptr<std_srvs::srv::Trigger::Request>& request,
               const std::shared_ptr<std_srvs::srv::Trigger::Response>& response) { return pauseCB(request, response); });
    unpause_servo_service_ = node_->create_service<std_srvs::srv::Trigger>(
        "~/unpause_servo", [this](const std::shared_ptr<std_srvs::srv::Trigger::Request>& request,
                                  const std::shared_ptr<std_srvs::srv::Trigger::Response>& response) {
          return unpauseCB(request, response);
        });

    // Can set robot_description name from parameters
    std::string robot_description_name = "robot_description";
    node_->get_parameter_or("robot_description_name", robot_description_name, robot_description_name);

    // Get the servo parameters
    auto servo_parameters = moveit_servo::ServoParameters::makeServoParameters(node_);
    if (servo_parameters == nullptr)
    {
      RCLCPP_ERROR(LOGGER, "Failed to load the servo parameters");
      throw std::runtime_error("Failed to load the servo parameters");
    }

    // Set up planning_scene_monitor
    planning_scene_monitor_ = std::make_shared<planning_scene_monitor::PlanningSceneMonitor>(
        node_, robot_description_name, "planning_scene_monitor");
    planning_scene_monitor_->startStateMonitor(servo_parameters->joint_topic);
    planning_scene_monitor_->startSceneMonitor(servo_parameters->monitored_planning_scene_topic);
    planning_scene_monitor_->startWorldGeometryMonitor();
    planning_scene_monitor_->setPlanningScenePublishingFrequency(25);
    planning_scene_monitor_->getStateMonitor()->enableCopyDynamics(true);
    planning_scene_monitor_->startPublishingPlanningScene(planning_scene_monitor::PlanningSceneMonitor::UPDATE_SCENE,
                                                          std::string(node_->get_fully_qualified_name()) +
                                                              "/publish_planning_scene");
    // If the planning scene monitor in servo is the primary one we provide /get_planning_scene service so RViz displays
    // or secondary planning scene monitors can fetch the scene, otherwise we request the planning scene from the
    // primary planning scene monitor (e.g. move_group)
    if (servo_parameters->is_primary_planning_scene_monitor)
      planning_scene_monitor_->providePlanningSceneService();
    else
      planning_scene_monitor_->requestPlanningSceneState();

    // Create Servo
    servo_ = std::make_unique<moveit_servo::Servo>(node_, servo_parameters, planning_scene_monitor_);
  }
architecture-codes:
  - Topic/Service Issue - Topic/Service Not Used Issue
  - Topic/Service Issue - Topic/Service Name Mismatch Issue
  - Topic/Service Issue - Topic/Service Use Error Issue
  - ROS Parameter Issue - Insufficient Parameter Design Issue
  - ROS Logger Issue - ROS Logger Missing Issue

functionality-codes:
  - Domain Library Issue - Domain Specific Library Utilization Error
  - Condition Issue - Conditional Check Missing Issue
  - Condition Issue - Condition Check Logic Misapplication Issue
  - Incomplete Code Issue - Missing Multiple Steps Issue

root-cause-codes:
  - Solving Robotic Tasks Issue - Inadequate Understanding of System Requirements
  - Framework Integration Issue - Insufficient understanding of ROS Integration
  - Framework Integration Issue - Lack of ROS development best practices
  - Solving Robotic Tasks Issue - Inadequate Understanding of Existing Codebase 