compilation.log: |
  Starting >>> autoware_planning_evaluator
  --- stderr: autoware_planning_evaluator
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp: In member function ‘void planning_diagnostics::PlanningEvaluatorNode::onTimer()’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:260:37: error: ‘class autoware::universe_utils::InterProcessPollingSubscriber<nav_msgs::msg::Odometry_<std::allocator<void> > >’ has no member named ‘get’
    260 |   auto odometry_msg = odometry_sub_.get();
        |                                     ^~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:267:35: error: ‘class autoware::universe_utils::InterProcessPollingSubscriber<autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> > >’ has no member named ‘get’
    267 |   auto objects_msg = objects_sub_.get();
        |                                   ^~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:274:32: error: ‘class autoware::universe_utils::InterProcessPollingSubscriber<autoware_planning_msgs::msg::Trajectory_<std::allocator<void> > >’ has no member named ‘get’
    274 |   auto ref_traj_msg = ref_sub_.get();
        |                                ^~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:281:29: error: ‘class autoware::universe_utils::InterProcessPollingSubscriber<autoware_planning_msgs::msg::Trajectory_<std::allocator<void> > >’ has no member named ‘get’
    281 |   auto traj_msg = traj_sub_.get();
        |                             ^~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:288:47: error: ‘class autoware::universe_utils::InterProcessPollingSubscriber<autoware_planning_msgs::msg::PoseWithUuidStamped_<std::allocator<void> > >’ has no member named ‘get’
    288 |   auto modified_goal_msg = modified_goal_sub_.get();
        |                                               ^~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:302:16: error: ‘using MetricArrayMsg = using MetricArray = struct tier4_metric_msgs::msg::MetricArray_<std::allocator<void> >’ {aka ‘struct tier4_metric_msgs::msg::MetricArray_<std::allocator<void> >’} has no member named ‘header’
    302 |   metrics_msg_.header.stamp = now();
        |                ^~~~~~
  gmake[2]: *** [CMakeFiles/planning_evaluator_node.dir/build.make:174: CMakeFiles/planning_evaluator_node.dir/src/planning_evaluator_node.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:161: CMakeFiles/planning_evaluator_node.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_planning_evaluator [13.6s, exited with code 2]

  Summary: 0 packages finished [15.0s]
    1 package failed: autoware_planning_evaluator
    1 package had stderr output: autoware_planning_evaluator
generate_code.cpp: |-
  void PlanningEvaluatorNode::onTimer()
  {
    // Start timing for processing duration
    auto start_time = std::chrono::steady_clock::now();

    // Retrieve the latest odometry message
    auto odometry_msg = odometry_sub_.get();
    if (!odometry_msg) {
      RCLCPP_WARN(get_logger(), "Odometry data not available.");
      return;
    }

    // Retrieve the latest object detections message
    auto objects_msg = objects_sub_.get();
    if (!objects_msg) {
      RCLCPP_WARN(get_logger(), "Object detections data not available.");
      return;
    }

    // Retrieve the latest reference trajectory message
    auto ref_traj_msg = ref_sub_.get();
    if (!ref_traj_msg) {
      RCLCPP_WARN(get_logger(), "Reference trajectory data not available.");
      return;
    }

    // Retrieve the latest planned trajectory message
    auto traj_msg = traj_sub_.get();
    if (!traj_msg) {
      RCLCPP_WARN(get_logger(), "Planned trajectory data not available.");
      return;
    }

    // Retrieve the latest modified goal message
    auto modified_goal_msg = modified_goal_sub_.get();
    if (!modified_goal_msg) {
      RCLCPP_WARN(get_logger(), "Modified goal data not available.");
      return;
    }

    // Process the retrieved data using the related functions
    onOdometry(odometry_msg);
    onObjects(objects_msg);
    onReferenceTrajectory(ref_traj_msg);
    onTrajectory(traj_msg, odometry_msg);
    onModifiedGoal(modified_goal_msg, odometry_msg);

    // Publish evaluation metrics
    metrics_msg_.header.stamp = now();
    metrics_pub_->publish(metrics_msg_);

    // Calculate and publish processing time
    auto end_time = std::chrono::steady_clock::now();
    auto processing_duration = std::chrono::duration_cast<std::chrono::milliseconds>(end_time - start_time).count();

    autoware_internal_debug_msgs::msg::Float64Stamped processing_time_msg;
    processing_time_msg.stamp = now();
    processing_time_msg.data = static_cast<double>(processing_duration);
    processing_time_pub_->publish(processing_time_msg);

    RCLCPP_INFO(get_logger(), "Planning evaluation completed in %ld ms.", processing_duration);
  }
ground_truth.cpp: |-
  void PlanningEvaluatorNode::onTimer()
  {
    autoware::universe_utils::StopWatch<std::chrono::milliseconds> stop_watch;

    const auto ego_state_ptr = odometry_sub_.takeData();
    onOdometry(ego_state_ptr);
    {
      const auto objects_msg = objects_sub_.takeData();
      onObjects(objects_msg);
    }

    {
      const auto ref_traj_msg = ref_sub_.takeData();
      onReferenceTrajectory(ref_traj_msg);
    }

    {
      const auto traj_msg = traj_sub_.takeData();
      onTrajectory(traj_msg, ego_state_ptr);
    }
    {
      const auto modified_goal_msg = modified_goal_sub_.takeData();
      onModifiedGoal(modified_goal_msg, ego_state_ptr);
    }

    // Publish metrics
    metrics_msg_.stamp = now();
    metrics_pub_->publish(metrics_msg_);
    metrics_msg_ = MetricArrayMsg{};

    // Publish ProcessingTime
    autoware_internal_debug_msgs::msg::Float64Stamped processing_time_msg;
    processing_time_msg.stamp = get_clock()->now();
    processing_time_msg.data = stop_watch.toc();
    processing_time_pub_->publish(processing_time_msg);
  }
