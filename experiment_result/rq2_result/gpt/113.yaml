compilation.log: |
  Starting >>> autoware_motion_velocity_dynamic_obstacle_stop_module
  --- stderr: autoware_motion_velocity_dynamic_obstacle_stop_module
  /workspace/repos/autoware/src/universe/autoware.universe/planning/motion_velocity_planner/autoware_motion_velocity_dynamic_obstacle_stop_module/src/object_filtering.cpp: In function ‘bool autoware::motion_velocity_planner::dynamic_obstacle_stop::is_in_range(const PredictedObject&, const TrajectoryPoints&, const autoware::motion_velocity_planner::dynamic_obstacle_stop::PlannerParam&, double)’:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/motion_velocity_planner/autoware_motion_velocity_dynamic_obstacle_stop_module/src/object_filtering.cpp:61:43: error: ‘const struct autoware::motion_velocity_planner::dynamic_obstacle_stop::PlannerParam’ has no member named ‘lateral_safety_margin’
     61 |   const double lateral_range_min = params.lateral_safety_margin - hysteresis;
        |                                           ^~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/motion_velocity_planner/autoware_motion_velocity_dynamic_obstacle_stop_module/src/object_filtering.cpp:62:43: error: ‘const struct autoware::motion_velocity_planner::dynamic_obstacle_stop::PlannerParam’ has no member named ‘lateral_safety_margin’
     62 |   const double lateral_range_max = params.lateral_safety_margin + hysteresis;
        |                                           ^~~~~~~~~~~~~~~~~~~~~
  gmake[2]: *** [CMakeFiles/autoware_motion_velocity_dynamic_obstacle_stop_module.dir/build.make:132: CMakeFiles/autoware_motion_velocity_dynamic_obstacle_stop_module.dir/src/object_filtering.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:157: CMakeFiles/autoware_motion_velocity_dynamic_obstacle_stop_module.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_motion_velocity_dynamic_obstacle_stop_module [9.90s, exited with code 2]

  Summary: 0 packages finished [11.4s]
    1 package failed: autoware_motion_velocity_dynamic_obstacle_stop_module
    1 package had stderr output: autoware_motion_velocity_dynamic_obstacle_stop_module
generate_code.cpp: |-
  bool is_in_range(
    const autoware_perception_msgs::msg::PredictedObject & object,
    const TrajectoryPoints & ego_trajectory, const PlannerParam & params, const double hysteresis)
  {
    // Check if the ego trajectory is empty
    if (ego_trajectory.empty()) {
      return false;
    }

    // Extract the object's position
    const auto & object_position = object.kinematics.initial_pose_with_covariance.pose.position;

    // Calculate the lateral offset of the object relative to the ego trajectory
    const double lateral_offset = autoware::motion_utils::calcLateralOffset(
      ego_trajectory, object_position, 0, false);

    // Define the lateral safety range with hysteresis
    const double lateral_range_min = params.lateral_safety_margin - hysteresis;
    const double lateral_range_max = params.lateral_safety_margin + hysteresis;

    // Check if the lateral offset is within the safety range
    return (lateral_offset >= lateral_range_min && lateral_offset <= lateral_range_max);
  }
ground_truth.cpp: |-
  bool is_in_range(
    const autoware_perception_msgs::msg::PredictedObject & object,
    const TrajectoryPoints & ego_trajectory, const PlannerParam & params, const double hysteresis)
  {
    const auto distance = std::abs(motion_utils::calcLateralOffset(
      ego_trajectory, object.kinematics.initial_pose_with_covariance.pose.position));
    return distance <= params.minimum_object_distance_from_ego_trajectory +
                         params.ego_lateral_offset + object.shape.dimensions.y / 2.0 + hysteresis;
  }
