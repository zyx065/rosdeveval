compilation.log: |
  Starting >>> autoware_pid_longitudinal_controller
  Finished <<< autoware_pid_longitudinal_controller [13.0s]

  Summary: 1 package finished [14.3s]
generate_code.cpp: |-
  double getPitchByPose(const Quaternion & quaternion_msg)
  {
      // Extract the quaternion components
      double x = quaternion_msg.x;
      double y = quaternion_msg.y;
      double z = quaternion_msg.z;
      double w = quaternion_msg.w;

      // Calculate the pitch angle using the formula
      double sin_pitch = 2.0 * (w * y - z * x);
      double pitch;

      // Clamp the value to avoid invalid input to asin
      if (sin_pitch >= 1.0)
      {
          pitch = M_PI / 2; // 90 degrees
      }
      else if (sin_pitch <= -1.0)
      {
          pitch = -M_PI / 2; // -90 degrees
      }
      else
      {
          pitch = std::asin(sin_pitch);
      }

      return pitch;
  }
ground_truth.cpp: |-
  double getPitchByPose(const Quaternion & quaternion_msg)
  {
    double roll, pitch, yaw;
    tf2::Quaternion quaternion;
    tf2::fromMsg(quaternion_msg, quaternion);
    tf2::Matrix3x3{quaternion}.getRPY(roll, pitch, yaw);

    return pitch;
  }
