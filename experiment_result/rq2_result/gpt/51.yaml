compilation.log: |
  Starting >>> autoware_path_smoother
  --- stderr: autoware_path_smoother
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp: In lambda function:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp:91:32: error: ‘using element_type = class autoware::path_smoother::EBPathSmoother’ {aka ‘class autoware::path_smoother::EBPathSmoother’} has no member named ‘processPath’
     91 |         eb_path_smoother_ptr_->processPath(msg);
        |                                ^~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp: In constructor ‘autoware::path_smoother::ElasticBandSmoother::ElasticBandSmoother(const rclcpp::NodeOptions&)’:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp:96:13: error: ‘class autoware::universe_utils::InterProcessPollingSubscriber<nav_msgs::msg::Odometry_<std::allocator<void> > >’ has no member named ‘setCallback’
     96 |   odom_sub_.setCallback([this](const Odometry::SharedPtr msg) {
        |             ^~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp: In lambda function:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp:98:30: error: ‘using element_type = class autoware::path_smoother::EBPathSmoother’ {aka ‘class autoware::path_smoother::EBPathSmoother’} has no member named ‘updateOdometry’
     98 |       eb_path_smoother_ptr_->updateOdometry(msg);
        |                              ^~~~~~~~~~~~~~
  In file included from /usr/include/x86_64-linux-gnu/c++/11/bits/c++allocator.h:33,
                   from /usr/include/c++/11/bits/allocator.h:46,
                   from /usr/include/c++/11/string:41,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/streambuf:41,
                   from /usr/include/c++/11/bits/streambuf_iterator.h:35,
                   from /usr/include/c++/11/iterator:66,
                   from /usr/include/boost/iterator/iterator_traits.hpp:10,
                   from /usr/include/boost/range/mutable_iterator.hpp:23,
                   from /usr/include/boost/range/iterator.hpp:20,
                   from /usr/include/boost/range/value_type.hpp:19,
                   from /usr/include/boost/geometry/core/point_type.hpp:19,
                   from /usr/include/boost/geometry/core/coordinate_system.hpp:20,
                   from /usr/include/boost/geometry/core/cs.hpp:27,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/geometry/boost_geometry.hpp:18,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/geometry/geometry.hpp:18,
                   from /workspace/repos/autoware/install/autoware_motion_utils/include/autoware/motion_utils/trajectory/trajectory.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/include/autoware/path_smoother/elastic_band_smoother.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp:15:
  /usr/include/c++/11/ext/new_allocator.h: In instantiation of ‘void __gnu_cxx::new_allocator<_Tp>::construct(_Up*, _Args&& ...) [with _Up = autoware::path_smoother::EBPathSmoother; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}; _Tp = autoware::path_smoother::EBPathSmoother]’:
  /usr/include/c++/11/bits/alloc_traits.h:516:17:   required from ‘static void std::allocator_traits<std::allocator<_CharT> >::construct(std::allocator_traits<std::allocator<_CharT> >::allocator_type&, _Up*, _Args&& ...) [with _Up = autoware::path_smoother::EBPathSmoother; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}; _Tp = autoware::path_smoother::EBPathSmoother; std::allocator_traits<std::allocator<_CharT> >::allocator_type = std::allocator<autoware::path_smoother::EBPathSmoother>]’
  /usr/include/c++/11/bits/shared_ptr_base.h:519:39:   required from ‘std::_Sp_counted_ptr_inplace<_Tp, _Alloc, _Lp>::_Sp_counted_ptr_inplace(_Alloc, _Args&& ...) [with _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}; _Tp = autoware::path_smoother::EBPathSmoother; _Alloc = std::allocator<autoware::path_smoother::EBPathSmoother>; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr_base.h:650:16:   required from ‘std::__shared_count<_Lp>::__shared_count(_Tp*&, std::_Sp_alloc_shared_tag<_Alloc>, _Args&& ...) [with _Tp = autoware::path_smoother::EBPathSmoother; _Alloc = std::allocator<autoware::path_smoother::EBPathSmoother>; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr_base.h:1342:14:   required from ‘std::__shared_ptr<_Tp, _Lp>::__shared_ptr(std::_Sp_alloc_shared_tag<_Tp>, _Args&& ...) [with _Alloc = std::allocator<autoware::path_smoother::EBPathSmoother>; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}; _Tp = autoware::path_smoother::EBPathSmoother; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr.h:409:59:   required from ‘std::shared_ptr<_Tp>::shared_ptr(std::_Sp_alloc_shared_tag<_Tp>, _Args&& ...) [with _Alloc = std::allocator<autoware::path_smoother::EBPathSmoother>; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}; _Tp = autoware::path_smoother::EBPathSmoother]’
  /usr/include/c++/11/bits/shared_ptr.h:862:14:   required from ‘std::shared_ptr<_Tp> std::allocate_shared(const _Alloc&, _Args&& ...) [with _Tp = autoware::path_smoother::EBPathSmoother; _Alloc = std::allocator<autoware::path_smoother::EBPathSmoother>; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}]’
  /usr/include/c++/11/bits/shared_ptr.h:878:39:   required from ‘std::shared_ptr<_Tp> std::make_shared(_Args&& ...) [with _Tp = autoware::path_smoother::EBPathSmoother; _Args = {autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&}]’
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp:107:59:   required from here
  /usr/include/c++/11/ext/new_allocator.h:162:11: error: no matching function for call to ‘autoware::path_smoother::EBPathSmoother::EBPathSmoother(autoware::path_smoother::ElasticBandSmoother*, autoware::path_smoother::CommonParam&, autoware::path_smoother::EgoNearestParam&)’
    162 |         { ::new((void *)__p) _Up(std::forward<_Args>(__args)...); }
        |           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/include/autoware/path_smoother/elastic_band_smoother.hpp:20,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/src/elastic_band_smoother.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/include/autoware/path_smoother/elastic_band.hpp:35:3: note: candidate: ‘autoware::path_smoother::EBPathSmoother::EBPathSmoother(rclcpp::Node*, bool, autoware::path_smoother::EgoNearestParam, const autoware::path_smoother::CommonParam&, std::shared_ptr<autoware::path_smoother::TimeKeeper>)’
     35 |   EBPathSmoother(
        |   ^~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/include/autoware/path_smoother/elastic_band.hpp:35:3: note:   candidate expects 5 arguments, 3 provided
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/include/autoware/path_smoother/elastic_band.hpp:32:7: note: candidate: ‘autoware::path_smoother::EBPathSmoother::EBPathSmoother(autoware::path_smoother::EBPathSmoother&&)’
     32 | class EBPathSmoother
        |       ^~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_path_smoother/include/autoware/path_smoother/elastic_band.hpp:32:7: note:   candidate expects 1 argument, 3 provided
  gmake[2]: *** [CMakeFiles/autoware_path_smoother.dir/build.make:90: CMakeFiles/autoware_path_smoother.dir/src/elastic_band_smoother.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:159: CMakeFiles/autoware_path_smoother.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_path_smoother [7.98s, exited with code 2]

  Summary: 0 packages finished [9.41s]
    1 package failed: autoware_path_smoother
    1 package had stderr output: autoware_path_smoother
generate_code.cpp: |-
  ElasticBandSmoother::ElasticBandSmoother(const rclcpp::NodeOptions & node_options)
  : Node("autoware_path_smoother", node_options), time_keeper_ptr_(std::make_shared<TimeKeeper>())
  {
    // Initialize publishers
    traj_pub_ = this->create_publisher<Trajectory>("~/output/trajectory", rclcpp::QoS{1}.transient_local());
    path_pub_ = this->create_publisher<Path>("~/output/path", rclcpp::QoS{1}.transient_local());
    debug_extended_traj_pub_ = this->create_publisher<Trajectory>("~/debug/extended_trajectory", rclcpp::QoS{1});
    debug_calculation_time_str_pub_ = this->create_publisher<StringStamped>("~/debug/calculation_time_str", rclcpp::QoS{1});
    debug_calculation_time_float_pub_ = this->create_publisher<Float64Stamped>("~/debug/calculation_time_float", rclcpp::QoS{1});

    // Initialize subscriber
    path_sub_ = this->create_subscription<Path>(
      "~/input/path", rclcpp::QoS{1},
      [this](const Path::SharedPtr msg) {
        // Callback logic for path subscription
        if (eb_path_smoother_ptr_) {
          eb_path_smoother_ptr_->processPath(msg);
        }
      });

    // Initialize odometry subscriber
    odom_sub_.setCallback([this](const Odometry::SharedPtr msg) {
      if (eb_path_smoother_ptr_) {
        eb_path_smoother_ptr_->updateOdometry(msg);
      }
    });

    // Initialize parameters
    common_param_ = CommonParam(this);
    ego_nearest_param_ = EgoNearestParam(this);

    // Initialize path smoother
    eb_path_smoother_ptr_ = std::make_shared<EBPathSmoother>(this, common_param_, ego_nearest_param_);

    // Enable debug info
    enable_debug_info_ = this->declare_parameter<bool>("enable_debug_info", false);

    // Initialize logger configuration
    logger_configure_ = std::make_unique<autoware::universe_utils::LoggerLevelConfigure>(this);

    // Initialize published time publisher
    published_time_publisher_ = std::make_unique<autoware::universe_utils::PublishedTimePublisher>(this);

    // Set parameter callback
    set_param_res_ = this->add_on_set_parameters_callback(
      [this](const std::vector<rclcpp::Parameter> & parameters) {
        return this->onParam(parameters);
      });

    // Initialize planning logic
    initializePlanning();
  }
ground_truth.cpp: |-
  ElasticBandSmoother::ElasticBandSmoother(const rclcpp::NodeOptions & node_options)
  : Node("autoware_path_smoother", node_options), time_keeper_ptr_(std::make_shared<TimeKeeper>())
  {
    // interface publisher
    traj_pub_ = create_publisher<Trajectory>("~/output/traj", 1);
    path_pub_ = create_publisher<Path>("~/output/path", 1);

    // interface subscriber
    path_sub_ = create_subscription<Path>(
      "~/input/path", 1, std::bind(&ElasticBandSmoother::onPath, this, std::placeholders::_1));

    // debug publisher
    debug_extended_traj_pub_ = create_publisher<Trajectory>("~/debug/extended_traj", 1);
    debug_calculation_time_str_pub_ = create_publisher<StringStamped>("~/debug/calculation_time", 1);
    debug_calculation_time_float_pub_ =
      create_publisher<Float64Stamped>("~/debug/processing_time_ms", 1);

    {  // parameters
      // parameters for ego nearest search
      ego_nearest_param_ = EgoNearestParam(this);

      // parameters for trajectory
      common_param_ = CommonParam(this);
    }

    eb_path_smoother_ptr_ = std::make_shared<EBPathSmoother>(
      this, enable_debug_info_, ego_nearest_param_, common_param_, time_keeper_ptr_);
    replan_checker_ptr_ = std::make_shared<ReplanChecker>(this, ego_nearest_param_);

    // reset planners
    initializePlanning();

    // set parameter callback
    set_param_res_ = this->add_on_set_parameters_callback(
      std::bind(&ElasticBandSmoother::onParam, this, std::placeholders::_1));

    logger_configure_ = std::make_unique<autoware::universe_utils::LoggerLevelConfigure>(this);
    published_time_publisher_ =
      std::make_unique<autoware::universe_utils::PublishedTimePublisher>(this);
  }
