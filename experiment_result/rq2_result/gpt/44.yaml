compilation.log: |
  Starting >>> autoware_obstacle_cruise_planner
  --- stderr: autoware_obstacle_cruise_planner
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp: In constructor ‘autoware::motion_planning::ObstacleCruisePlannerNode::ObstacleCruisePlannerNode(const rclcpp::NodeOptions&)’:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:202:38: error: ‘autoware::motion_planning::ObstacleCruisePlannerNode::debug_data_ptr_’ will be initialized after [-Werror=reorder]
    202 |   mutable std::shared_ptr<DebugData> debug_data_ptr_{nullptr};
        |                                      ^~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:175:47: error:   ‘rclcpp::Subscription<autoware_planning_msgs::msg::Trajectory_<std::allocator<void> > >::SharedPtr autoware::motion_planning::ObstacleCruisePlannerNode::traj_sub_’ [-Werror=reorder]
    175 |   rclcpp::Subscription<Trajectory>::SharedPtr traj_sub_;
        |                                               ^~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:497:1: error:   when initialized here [-Werror=reorder]
    497 | ObstacleCruisePlannerNode::ObstacleCruisePlannerNode(const rclcpp::NodeOptions & node_options)
        | ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:182:87: error: ‘autoware::motion_planning::ObstacleCruisePlannerNode::acc_sub_’ will be initialized after [-Werror=reorder]
    182 |   autoware::universe_utils::InterProcessPollingSubscriber<AccelWithCovarianceStamped> acc_sub_{
        |                                                                                       ^~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:162:44: error:   ‘rclcpp::Publisher<autoware_planning_msgs::msg::Trajectory_<std::allocator<void> > >::SharedPtr autoware::motion_planning::ObstacleCruisePlannerNode::trajectory_pub_’ [-Werror=reorder]
    162 |   rclcpp::Publisher<Trajectory>::SharedPtr trajectory_pub_;
        |                                            ^~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:497:1: error:   when initialized here [-Werror=reorder]
    497 | ObstacleCruisePlannerNode::ObstacleCruisePlannerNode(const rclcpp::NodeOptions & node_options)
        | ^~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:188:47: error: ‘autoware::motion_planning::ObstacleCruisePlannerNode::tf_listener_’ will be initialized after [-Werror=reorder]
    188 |   std::shared_ptr<tf2_ros::TransformListener> tf_listener_{nullptr};
        |                                               ^~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:142:8: error:   ‘bool autoware::motion_planning::ObstacleCruisePlannerNode::enable_debug_info_’ [-Werror=reorder]
    142 |   bool enable_debug_info_;
        |        ^~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:497:1: error:   when initialized here [-Werror=reorder]
    497 | ObstacleCruisePlannerNode::ObstacleCruisePlannerNode(const rclcpp::NodeOptions & node_options)
        | ^~~~~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:540:3: error: no matching function for call to ‘EgoNearestParam::EgoNearestParam(<brace-enclosed initializer list>)’
    540 |   ego_nearest_param_{
        |   ^~~~~~~~~~~~~~~~~~~
    541 |     declare_parameter<double>("ego_nearest_param.search_radius", 5.0),
        |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
    542 |     declare_parameter<double>("ego_nearest_param.search_angle_range", M_PI / 4.0)},
        |     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:311:12: note: candidate: ‘EgoNearestParam::EgoNearestParam(rclcpp::Node&)’
    311 |   explicit EgoNearestParam(rclcpp::Node & node)
        |            ^~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:311:12: note:   candidate expects 1 argument, 2 provided
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:310:3: note: candidate: ‘EgoNearestParam::EgoNearestParam()’
    310 |   EgoNearestParam() = default;
        |   ^~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:310:3: note:   candidate expects 0 arguments, 2 provided
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:308:8: note: candidate: ‘constexpr EgoNearestParam::EgoNearestParam(const EgoNearestParam&)’
    308 | struct EgoNearestParam
        |        ^~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:308:8: note:   candidate expects 1 argument, 2 provided
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:308:8: note: candidate: ‘constexpr EgoNearestParam::EgoNearestParam(EgoNearestParam&&)’
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:308:8: note:   candidate expects 1 argument, 2 provided
  In file included from /usr/include/c++/11/memory:76,
                   from /workspace/repos/autoware/install/autoware_planning_msgs/include/autoware_planning_msgs/autoware_planning_msgs/msg/detail/path__struct.hpp:10,
                   from /workspace/repos/autoware/install/autoware_motion_utils/include/autoware/motion_utils/trajectory/conversion.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /usr/include/c++/11/bits/unique_ptr.h: In instantiation of ‘typename std::_MakeUniq<_Tp>::__single_object std::make_unique(_Args&& ...) [with _Tp = autoware::universe_utils::LoggerLevelConfigure; _Args = {autoware::motion_planning::ObstacleCruisePlannerNode&}; typename std::_MakeUniq<_Tp>::__single_object = std::unique_ptr<autoware::universe_utils::LoggerLevelConfigure>]’:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:543:85:   required from here
  /usr/include/c++/11/bits/unique_ptr.h:962:30: error: no matching function for call to ‘autoware::universe_utils::LoggerLevelConfigure::LoggerLevelConfigure(autoware::motion_planning::ObstacleCruisePlannerNode&)’
    962 |     { return unique_ptr<_Tp>(new _Tp(std::forward<_Args>(__args)...)); }
        |                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:23,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/logger_level_configure.hpp:56:12: note: candidate: ‘autoware::universe_utils::LoggerLevelConfigure::LoggerLevelConfigure(rclcpp::Node*)’
     56 |   explicit LoggerLevelConfigure(rclcpp::Node * node);
        |            ^~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/logger_level_configure.hpp:56:48: note:   no known conversion for argument 1 from ‘autoware::motion_planning::ObstacleCruisePlannerNode’ to ‘rclcpp::Node*’
     56 |   explicit LoggerLevelConfigure(rclcpp::Node * node);
        |                                 ~~~~~~~~~~~~~~~^~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/logger_level_configure.hpp:50:7: note: candidate: ‘autoware::universe_utils::LoggerLevelConfigure::LoggerLevelConfigure(const autoware::universe_utils::LoggerLevelConfigure&)’
     50 | class LoggerLevelConfigure
        |       ^~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/logger_level_configure.hpp:50:7: note:   no known conversion for argument 1 from ‘autoware::motion_planning::ObstacleCruisePlannerNode’ to ‘const autoware::universe_utils::LoggerLevelConfigure&’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/logger_level_configure.hpp:50:7: note: candidate: ‘autoware::universe_utils::LoggerLevelConfigure::LoggerLevelConfigure(autoware::universe_utils::LoggerLevelConfigure&&)’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/logger_level_configure.hpp:50:7: note:   no known conversion for argument 1 from ‘autoware::motion_planning::ObstacleCruisePlannerNode’ to ‘autoware::universe_utils::LoggerLevelConfigure&&’
  In file included from /usr/include/c++/11/memory:76,
                   from /workspace/repos/autoware/install/autoware_planning_msgs/include/autoware_planning_msgs/autoware_planning_msgs/msg/detail/path__struct.hpp:10,
                   from /workspace/repos/autoware/install/autoware_motion_utils/include/autoware/motion_utils/trajectory/conversion.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/common_structs.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /usr/include/c++/11/bits/unique_ptr.h: In instantiation of ‘typename std::_MakeUniq<_Tp>::__single_object std::make_unique(_Args&& ...) [with _Tp = autoware::universe_utils::PublishedTimePublisher; _Args = {autoware::motion_planning::ObstacleCruisePlannerNode&}; typename std::_MakeUniq<_Tp>::__single_object = std::unique_ptr<autoware::universe_utils::PublishedTimePublisher>]’:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:545:71:   required from here
  /usr/include/c++/11/bits/unique_ptr.h:962:30: error: no matching function for call to ‘autoware::universe_utils::PublishedTimePublisher::PublishedTimePublisher(autoware::motion_planning::ObstacleCruisePlannerNode&)’
    962 |     { return unique_ptr<_Tp>(new _Tp(std::forward<_Args>(__args)...)); }
        |                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/include/autoware/obstacle_cruise_planner/node.hpp:28,
                   from /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:15:
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/published_time_publisher.hpp:35:12: note: candidate: ‘autoware::universe_utils::PublishedTimePublisher::PublishedTimePublisher(rclcpp::Node*, std::string, const rclcpp::QoS&)’
     35 |   explicit PublishedTimePublisher(
        |            ^~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/published_time_publisher.hpp:36:20: note:   no known conversion for argument 1 from ‘autoware::motion_planning::ObstacleCruisePlannerNode’ to ‘rclcpp::Node*’
     36 |     rclcpp::Node * node, std::string publisher_topic_suffix = "/debug/published_time",
        |     ~~~~~~~~~~~~~~~^~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/published_time_publisher.hpp:32:7: note: candidate: ‘autoware::universe_utils::PublishedTimePublisher::PublishedTimePublisher(const autoware::universe_utils::PublishedTimePublisher&)’
     32 | class PublishedTimePublisher
        |       ^~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/published_time_publisher.hpp:32:7: note:   no known conversion for argument 1 from ‘autoware::motion_planning::ObstacleCruisePlannerNode’ to ‘const autoware::universe_utils::PublishedTimePublisher&’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/published_time_publisher.hpp:32:7: note: candidate: ‘autoware::universe_utils::PublishedTimePublisher::PublishedTimePublisher(autoware::universe_utils::PublishedTimePublisher&&)’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/published_time_publisher.hpp:32:7: note:   no known conversion for argument 1 from ‘autoware::motion_planning::ObstacleCruisePlannerNode’ to ‘autoware::universe_utils::PublishedTimePublisher&&’
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp: At global scope:
  /workspace/repos/autoware/src/universe/autoware.universe/planning/autoware_obstacle_cruise_planner/src/node.cpp:233:18: error: ‘std::vector<int> {anonymous}::getTargetObjectType(rclcpp::Node&, const string&)’ defined but not used [-Werror=unused-function]
    233 | std::vector<int> getTargetObjectType(rclcpp::Node & node, const std::string & param_prefix)
        |                  ^~~~~~~~~~~~~~~~~~~
  cc1plus: all warnings being treated as errors
  gmake[2]: *** [CMakeFiles/autoware_obstacle_cruise_planner_core.dir/build.make:76: CMakeFiles/autoware_obstacle_cruise_planner_core.dir/src/node.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:159: CMakeFiles/autoware_obstacle_cruise_planner_core.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_obstacle_cruise_planner [21.5s, exited with code 2]

  Summary: 0 packages finished [23.0s]
    1 package failed: autoware_obstacle_cruise_planner
    1 package had stderr output: autoware_obstacle_cruise_planner
generate_code.cpp: |-
  ObstacleCruisePlannerNode::ObstacleCruisePlannerNode(const rclcpp::NodeOptions & node_options)
  : Node("obstacle_cruise_planner", node_options),
    vehicle_info_(autoware::vehicle_info_utils::VehicleInfoUtils(*this).getVehicleInfo()),
    debug_data_ptr_(std::make_shared<DebugData>()),
    traj_sub_(this->create_subscription<Trajectory>(
      "~/input/trajectory", rclcpp::QoS{1},
      std::bind(&ObstacleCruisePlannerNode::onTrajectory, this, std::placeholders::_1))),
    ego_odom_sub_{this, "~/input/odometry"},
    objects_sub_{this, "~/input/objects"},
    pointcloud_sub_{this, "~/input/pointcloud"},
    acc_sub_{this, "~/input/acceleration"},
    trajectory_pub_(this->create_publisher<Trajectory>("~/output/trajectory", rclcpp::QoS{1})),
    vel_limit_pub_(this->create_publisher<VelocityLimit>("~/output/velocity_limit", rclcpp::QoS{1})),
    clear_vel_limit_pub_(this->create_publisher<VelocityLimitClearCommand>(
      "~/output/clear_velocity_limit", rclcpp::QoS{1})),
    debug_marker_pub_(this->create_publisher<MarkerArray>("~/debug/marker", rclcpp::QoS{1})),
    debug_cruise_wall_marker_pub_(this->create_publisher<MarkerArray>(
      "~/debug/cruise_wall_marker", rclcpp::QoS{1})),
    debug_stop_wall_marker_pub_(this->create_publisher<MarkerArray>(
      "~/debug/stop_wall_marker", rclcpp::QoS{1})),
    debug_slow_down_wall_marker_pub_(this->create_publisher<MarkerArray>(
      "~/debug/slow_down_wall_marker", rclcpp::QoS{1})),
    debug_stop_planning_info_pub_(this->create_publisher<Float32MultiArrayStamped>(
      "~/debug/stop_planning_info", rclcpp::QoS{1})),
    debug_cruise_planning_info_pub_(this->create_publisher<Float32MultiArrayStamped>(
      "~/debug/cruise_planning_info", rclcpp::QoS{1})),
    debug_slow_down_planning_info_pub_(this->create_publisher<Float32MultiArrayStamped>(
      "~/debug/slow_down_planning_info", rclcpp::QoS{1})),
    debug_calculation_time_pub_(this->create_publisher<Float64Stamped>(
      "~/debug/calculation_time", rclcpp::QoS{1})),
    tf_buffer_(std::make_unique<tf2_ros::Buffer>(this->get_clock())),
    tf_listener_(std::make_shared<tf2_ros::TransformListener>(*tf_buffer_)),
    enable_debug_info_(declare_parameter<bool>("enable_debug_info", false)),
    enable_calculation_time_info_(declare_parameter<bool>("enable_calculation_time_info", false)),
    use_pointcloud_for_stop_(declare_parameter<bool>("use_pointcloud_for_stop", true)),
    use_pointcloud_for_slow_down_(declare_parameter<bool>("use_pointcloud_for_slow_down", true)),
    min_behavior_stop_margin_(declare_parameter<double>("min_behavior_stop_margin", 1.0)),
    enable_approaching_on_curve_(declare_parameter<bool>("enable_approaching_on_curve", false)),
    additional_safe_distance_margin_on_curve_(
      declare_parameter<double>("additional_safe_distance_margin_on_curve", 0.5)),
    min_safe_distance_margin_on_curve_(
      declare_parameter<double>("min_safe_distance_margin_on_curve", 0.2)),
    suppress_sudden_obstacle_stop_(declare_parameter<bool>("suppress_sudden_obstacle_stop", false)),
    ego_nearest_param_{
      declare_parameter<double>("ego_nearest_param.search_radius", 5.0),
      declare_parameter<double>("ego_nearest_param.search_angle_range", M_PI / 4.0)},
    logger_configure_(std::make_unique<autoware::universe_utils::LoggerLevelConfigure>(*this)),
    published_time_publisher_(
      std::make_unique<autoware::universe_utils::PublishedTimePublisher>(*this))
  {
    set_param_res_ = this->add_on_set_parameters_callback(
      std::bind(&ObstacleCruisePlannerNode::onParam, this, std::placeholders::_1));
  }
ground_truth.cpp: |-
  ObstacleCruisePlannerNode::ObstacleCruisePlannerNode(const rclcpp::NodeOptions & node_options)
  : Node("obstacle_cruise_planner", node_options),
    vehicle_info_(autoware::vehicle_info_utils::VehicleInfoUtils(*this).getVehicleInfo()),
    debug_data_ptr_(std::make_shared<DebugData>())
  {
    using std::placeholders::_1;

    // subscriber
    traj_sub_ = create_subscription<Trajectory>(
      "~/input/trajectory", rclcpp::QoS{1},
      std::bind(&ObstacleCruisePlannerNode::onTrajectory, this, _1));

    // publisher
    trajectory_pub_ = create_publisher<Trajectory>("~/output/trajectory", 1);
    vel_limit_pub_ =
      create_publisher<VelocityLimit>("~/output/velocity_limit", rclcpp::QoS{1}.transient_local());
    clear_vel_limit_pub_ = create_publisher<VelocityLimitClearCommand>(
      "~/output/clear_velocity_limit", rclcpp::QoS{1}.transient_local());

    // debug publisher
    debug_calculation_time_pub_ = create_publisher<Float64Stamped>("~/debug/processing_time_ms", 1);
    debug_cruise_wall_marker_pub_ = create_publisher<MarkerArray>("~/virtual_wall/cruise", 1);
    debug_stop_wall_marker_pub_ = create_publisher<MarkerArray>("~/virtual_wall/stop", 1);
    debug_slow_down_wall_marker_pub_ = create_publisher<MarkerArray>("~/virtual_wall/slow_down", 1);
    debug_marker_pub_ = create_publisher<MarkerArray>("~/debug/marker", 1);
    debug_stop_planning_info_pub_ =
      create_publisher<Float32MultiArrayStamped>("~/debug/stop_planning_info", 1);
    debug_cruise_planning_info_pub_ =
      create_publisher<Float32MultiArrayStamped>("~/debug/cruise_planning_info", 1);
    debug_slow_down_planning_info_pub_ =
      create_publisher<Float32MultiArrayStamped>("~/debug/slow_down_planning_info", 1);

    // tf listener
    tf_buffer_ = std::make_unique<tf2_ros::Buffer>(get_clock());
    tf_listener_ = std::make_shared<tf2_ros::TransformListener>(*tf_buffer_);

    const auto longitudinal_info = LongitudinalInfo(*this);

    ego_nearest_param_ = EgoNearestParam(*this);

    enable_debug_info_ = declare_parameter<bool>("common.enable_debug_info");
    enable_calculation_time_info_ = declare_parameter<bool>("common.enable_calculation_time_info");
    enable_slow_down_planning_ = declare_parameter<bool>("common.enable_slow_down_planning");

    use_pointcloud_for_stop_ = declare_parameter<bool>("common.stop_obstacle_type.pointcloud");
    use_pointcloud_for_slow_down_ =
      declare_parameter<bool>("common.slow_down_obstacle_type.pointcloud");
    use_pointcloud_ = use_pointcloud_for_stop_ || use_pointcloud_for_slow_down_;

    behavior_determination_param_ = BehaviorDeterminationParam(*this);

    {  // planning algorithm
      const std::string planning_algorithm_param =
        declare_parameter<std::string>("common.planning_algorithm");
      planning_algorithm_ = getPlanningAlgorithmType(planning_algorithm_param);

      if (planning_algorithm_ == PlanningAlgorithm::OPTIMIZATION_BASE) {
        planner_ptr_ = std::make_unique<OptimizationBasedPlanner>(
          *this, longitudinal_info, vehicle_info_, ego_nearest_param_, debug_data_ptr_);
      } else if (planning_algorithm_ == PlanningAlgorithm::PID_BASE) {
        planner_ptr_ = std::make_unique<PIDBasedPlanner>(
          *this, longitudinal_info, vehicle_info_, ego_nearest_param_, debug_data_ptr_);
      } else {
        throw std::logic_error("Designated algorithm is not supported.");
      }

      min_behavior_stop_margin_ = declare_parameter<double>("common.min_behavior_stop_margin");
      additional_safe_distance_margin_on_curve_ =
        declare_parameter<double>("common.stop_on_curve.additional_safe_distance_margin");
      enable_approaching_on_curve_ =
        declare_parameter<bool>("common.stop_on_curve.enable_approaching");
      min_safe_distance_margin_on_curve_ =
        declare_parameter<double>("common.stop_on_curve.min_safe_distance_margin");
      suppress_sudden_obstacle_stop_ =
        declare_parameter<bool>("common.suppress_sudden_obstacle_stop");
      planner_ptr_->setParam(
        enable_debug_info_, enable_calculation_time_info_, use_pointcloud_, min_behavior_stop_margin_,
        enable_approaching_on_curve_, additional_safe_distance_margin_on_curve_,
        min_safe_distance_margin_on_curve_, suppress_sudden_obstacle_stop_);
    }

    {  // stop/cruise/slow down obstacle type
      inside_stop_obstacle_types_ = getTargetObjectType(*this, "common.stop_obstacle_type.inside.");
      outside_stop_obstacle_types_ = getTargetObjectType(*this, "common.stop_obstacle_type.outside.");
      inside_cruise_obstacle_types_ =
        getTargetObjectType(*this, "common.cruise_obstacle_type.inside.");
      outside_cruise_obstacle_types_ =
        getTargetObjectType(*this, "common.cruise_obstacle_type.outside.");
      slow_down_obstacle_types_ = getTargetObjectType(*this, "common.slow_down_obstacle_type.");
    }

    // set parameter callback
    set_param_res_ = this->add_on_set_parameters_callback(
      std::bind(&ObstacleCruisePlannerNode::onParam, this, std::placeholders::_1));

    logger_configure_ = std::make_unique<autoware::universe_utils::LoggerLevelConfigure>(this);
    published_time_publisher_ =
      std::make_unique<autoware::universe_utils::PublishedTimePublisher>(this);
  }
