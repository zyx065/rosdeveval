compilation.log: |
  Starting >>> autoware_detected_object_validation
  --- stderr: autoware_detected_object_validation
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/debug.cpp: In member function ‘void autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode::publishDebugMarkers(rclcpp::Time, const LinearRing2d&, const std::vector<std::pair<boost::geometry::model::box<boost::geometry::model::point<double, 2, boost::geometry::cs::cartesian> >, autoware::detected_object_validation::lanelet_filter::PolygonAndLanelet> >&)’:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/debug.cpp:130:40: error: ‘const struct std::pair<boost::geometry::model::box<boost::geometry::model::point<double, 2, boost::geometry::cs::cartesian> >, autoware::detected_object_validation::lanelet_filter::PolygonAndLanelet>’ has no member named ‘box’
    130 |     const auto & box = box_and_lanelet.box; // Extract the bounding box
        |                                        ^~~
  gmake[2]: *** [CMakeFiles/object_lanelet_filter.dir/build.make:76: CMakeFiles/object_lanelet_filter.dir/src/lanelet_filter/debug.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:226: CMakeFiles/object_lanelet_filter.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_detected_object_validation [9.97s, exited with code 2]

  Summary: 0 packages finished [11.4s]
    1 package failed: autoware_detected_object_validation
    1 package had stderr output: autoware_detected_object_validation
generate_code.cpp: |-
  void ObjectLaneletFilterNode::publishDebugMarkers(
    rclcpp::Time stamp, const LinearRing2d & hull, const std::vector<BoxAndLanelet> & lanelets)
  {
    // Check if the visualization publisher is valid
    if (!viz_pub_) {
      RCLCPP_WARN(this->get_logger(), "Visualization publisher is not initialized.");
      return;
    }

    // Create a MarkerArray to hold all debug markers
    visualization_msgs::msg::MarkerArray marker_array;

    // Create a marker for the convex hull
    std_msgs::msg::ColorRGBA hull_color;
    hull_color.r = 0.0f;
    hull_color.g = 1.0f; // Green color for the hull
    hull_color.b = 0.0f;
    hull_color.a = 0.8f; // Semi-transparent

    auto hull_marker = createPolygonMarker(hull, stamp, "hull", 0, hull_color);
    if (hull_marker) {
      marker_array.markers.push_back(hull_marker.value());
    }

    // Create markers for each lanelet bounding box
    size_t marker_id = 1; // Start marker IDs from 1 (hull is 0)
    std_msgs::msg::ColorRGBA lanelet_color;
    lanelet_color.r = 1.0f; // Red color for lanelets
    lanelet_color.g = 0.0f;
    lanelet_color.b = 0.0f;
    lanelet_color.a = 0.8f; // Semi-transparent

    for (const auto & box_and_lanelet : lanelets) {
      const auto & box = box_and_lanelet.box; // Extract the bounding box

      auto lanelet_marker = createPolygonMarker(box, stamp, "lanelet", marker_id++, lanelet_color);
      if (lanelet_marker) {
        marker_array.markers.push_back(lanelet_marker.value());
      }
    }

    // Publish the MarkerArray
    viz_pub_->publish(marker_array);
  }
ground_truth.cpp: |-
  void ObjectLaneletFilterNode::publishDebugMarkers(
    rclcpp::Time stamp, const LinearRing2d & hull, const std::vector<BoxAndLanelet> & lanelets)
  {
    using visualization_msgs::msg::Marker;
    using visualization_msgs::msg::MarkerArray;

    uint8_t marker_id = 0;
    Marker delete_marker;
    constexpr std::string_view lanelet_range = "lanelet_range";
    constexpr std::string_view roi = "roi";

    MarkerArray marker_array;

    std_msgs::msg::ColorRGBA color;
    color.a = 0.5f;
    color.r = 0.3f;
    color.g = 1.0f;
    color.b = 0.2f;
    if (auto marker = createPolygonMarker(hull, stamp, lanelet_range, ++marker_id, color); marker) {
      marker_array.markers.push_back(std::move(*marker));
    }
    for (const auto & box_and_lanelet : lanelets) {
      color.r = 0.2;
      color.g = 0.5;
      color.b = 1.0;
      auto p = box_and_lanelet.second.polygon;
      if (auto marker = createPolygonMarker(p, stamp, roi, ++marker_id, color); marker) {
        marker_array.markers.push_back(std::move(*marker));
      }
    }
    viz_pub_->publish(marker_array);
  }
