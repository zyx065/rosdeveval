compilation.log: |
  Starting >>> nav2_controller
  Finished <<< nav2_controller [0.37s]

  Summary: 1 package finished [0.69s]
generate_code.cpp: |-
  void ControllerServer::publishVelocity(const geometry_msgs::msg::TwistStamped & velocity)
  {
      // Check if the velocity publisher is active
      if (!vel_publisher_ || !vel_publisher_->is_activated()) {
          RCLCPP_WARN(get_logger(), "Velocity publisher is not active. Skipping velocity command publication.");
          return;
      }

      // Check if there are subscribers to the velocity topic
      if (vel_publisher_->get_subscription_count() == 0) {
          RCLCPP_WARN(get_logger(), "No subscribers to the velocity topic. Skipping velocity command publication.");
          return;
      }

      // Create a Twist message and populate it with the twist component of the input velocity
      geometry_msgs::msg::Twist twist_msg;
      twist_msg.linear = velocity.twist.linear;
      twist_msg.angular = velocity.twist.angular;

      // Publish the velocity command
      vel_publisher_->publish(twist_msg);

      RCLCPP_DEBUG(get_logger(), "Published velocity command: linear=(%.2f, %.2f, %.2f), angular=(%.2f, %.2f, %.2f)",
                   twist_msg.linear.x, twist_msg.linear.y, twist_msg.linear.z,
                   twist_msg.angular.x, twist_msg.angular.y, twist_msg.angular.z);
  }
ground_truth.cpp: |-
  void ControllerServer::publishVelocity(const geometry_msgs::msg::TwistStamped & velocity)
  {
    auto cmd_vel = std::make_unique<geometry_msgs::msg::Twist>(velocity.twist);
    if (vel_publisher_->is_activated() && vel_publisher_->get_subscription_count() > 0) {
      vel_publisher_->publish(std::move(cmd_vel));
    }
  }
