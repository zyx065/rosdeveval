compilation.log: |
  Starting >>> autoware_detected_object_validation
  --- stderr: autoware_detected_object_validation
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp: In constructor ‘autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode::ObjectLaneletFilterNode(const rclcpp::NodeOptions&)’:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:58:115: error: no matching function for call to ‘autoware::detected_object_validation::utils::FilterTargetLabel::FilterTargetLabel(std::__cxx11::basic_string<char>)’
     58 |   filter_target_ = utils::FilterTargetLabel(this->declare_parameter<std::string>("filter_target_label", "vehicle"));
        |                                                                                                                   ^
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:15:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:26:8: note: candidate: ‘autoware::detected_object_validation::utils::FilterTargetLabel::FilterTargetLabel()’
     26 | struct FilterTargetLabel
        |        ^~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:26:8: note:   candidate expects 0 arguments, 1 provided
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:26:8: note: candidate: ‘constexpr autoware::detected_object_validation::utils::FilterTargetLabel::FilterTargetLabel(const autoware::detected_object_validation::utils::FilterTargetLabel&)’
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:26:8: note:   no known conversion for argument 1 from ‘std::__cxx11::basic_string<char>’ to ‘const autoware::detected_object_validation::utils::FilterTargetLabel&’
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:26:8: note: candidate: ‘constexpr autoware::detected_object_validation::utils::FilterTargetLabel::FilterTargetLabel(autoware::detected_object_validation::utils::FilterTargetLabel&&)’
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:26:8: note:   no known conversion for argument 1 from ‘std::__cxx11::basic_string<char>’ to ‘autoware::detected_object_validation::utils::FilterTargetLabel&&’
  In file included from /usr/include/c++/11/memory:76,
                   from /workspace/repos/autoware/install/autoware_perception_msgs/include/autoware_perception_msgs/autoware_perception_msgs/msg/detail/detected_objects__struct.hpp:10,
                   from /workspace/repos/autoware/install/autoware_perception_msgs/include/autoware_perception_msgs/autoware_perception_msgs/msg/detected_objects.hpp:7,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:15:
  /usr/include/c++/11/bits/unique_ptr.h: In instantiation of ‘typename std::_MakeUniq<_Tp>::__single_object std::make_unique(_Args&& ...) [with _Tp = autoware::universe_utils::DebugPublisher; _Args = {autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*}; typename std::_MakeUniq<_Tp>::__single_object = std::unique_ptr<autoware::universe_utils::DebugPublisher>]’:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:78:82:   required from here
  /usr/include/c++/11/bits/unique_ptr.h:962:30: error: no matching function for call to ‘autoware::universe_utils::DebugPublisher::DebugPublisher(autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*)’
    962 |     { return unique_ptr<_Tp>(new _Tp(std::forward<_Args>(__args)...)); }
        |                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.hpp:20,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:15:
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/debug_publisher.hpp:49:12: note: candidate: ‘autoware::universe_utils::DebugPublisher::DebugPublisher(rclcpp::Node*, const char*)’
     49 |   explicit DebugPublisher(rclcpp::Node * node, const char * ns) : node_(node), ns_(ns) {}
        |            ^~~~~~~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/debug_publisher.hpp:49:12: note:   candidate expects 2 arguments, 1 provided
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/debug_publisher.hpp:46:7: note: candidate: ‘autoware::universe_utils::DebugPublisher::DebugPublisher(const autoware::universe_utils::DebugPublisher&)’
     46 | class DebugPublisher
        |       ^~~~~~~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/debug_publisher.hpp:46:7: note:   no known conversion for argument 1 from ‘autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*’ to ‘const autoware::universe_utils::DebugPublisher&’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/debug_publisher.hpp:46:7: note: candidate: ‘autoware::universe_utils::DebugPublisher::DebugPublisher(autoware::universe_utils::DebugPublisher&&)’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/ros/debug_publisher.hpp:46:7: note:   no known conversion for argument 1 from ‘autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*’ to ‘autoware::universe_utils::DebugPublisher&&’
  In file included from /usr/include/c++/11/memory:76,
                   from /workspace/repos/autoware/install/autoware_perception_msgs/include/autoware_perception_msgs/autoware_perception_msgs/msg/detail/detected_objects__struct.hpp:10,
                   from /workspace/repos/autoware/install/autoware_perception_msgs/include/autoware_perception_msgs/autoware_perception_msgs/msg/detected_objects.hpp:7,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/include/autoware/detected_object_validation/utils/utils.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:15:
  /usr/include/c++/11/bits/unique_ptr.h: In instantiation of ‘typename std::_MakeUniq<_Tp>::__single_object std::make_unique(_Args&& ...) [with _Tp = autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >; _Args = {autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*}; typename std::_MakeUniq<_Tp>::__single_object = std::unique_ptr<autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > > >]’:
  /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:81:101:   required from here
  /usr/include/c++/11/bits/unique_ptr.h:962:30: error: no matching function for call to ‘autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >::StopWatch(autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*)’
    962 |     { return unique_ptr<_Tp>(new _Tp(std::forward<_Args>(__args)...)); }
        |                              ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.hpp:22,
                   from /workspace/repos/autoware/src/universe/autoware.universe/perception/autoware_detected_object_validation/src/lanelet_filter/lanelet_filter.cpp:15:
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/system/stop_watch.hpp:30:3: note: candidate: ‘autoware::universe_utils::StopWatch<OutputUnit, InternalUnit, Clock>::StopWatch() [with OutputUnit = std::chrono::duration<long int, std::ratio<1, 1000> >; InternalUnit = std::chrono::duration<long int, std::ratio<1, 1000000> >; Clock = std::chrono::_V2::steady_clock]’
     30 |   StopWatch() { tic(default_name); }
        |   ^~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/system/stop_watch.hpp:30:3: note:   candidate expects 0 arguments, 1 provided
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/system/stop_watch.hpp:27:7: note: candidate: ‘autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >::StopWatch(const autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >&)’
     27 | class StopWatch
        |       ^~~~~~~~~
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/system/stop_watch.hpp:27:7: note:   no known conversion for argument 1 from ‘autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*’ to ‘const autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >&’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/system/stop_watch.hpp:27:7: note: candidate: ‘autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >::StopWatch(autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >&&)’
  /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/system/stop_watch.hpp:27:7: note:   no known conversion for argument 1 from ‘autoware::detected_object_validation::lanelet_filter::ObjectLaneletFilterNode*’ to ‘autoware::universe_utils::StopWatch<std::chrono::duration<long int, std::ratio<1, 1000> > >&&’
  gmake[2]: *** [CMakeFiles/object_lanelet_filter.dir/build.make:90: CMakeFiles/object_lanelet_filter.dir/src/lanelet_filter/lanelet_filter.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:226: CMakeFiles/object_lanelet_filter.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_detected_object_validation [16.8s, exited with code 2]

  Summary: 0 packages finished [18.2s]
    1 package failed: autoware_detected_object_validation
    1 package had stderr output: autoware_detected_object_validation
generate_code.cpp: |-
  ObjectLaneletFilterNode::ObjectLaneletFilterNode(const rclcpp::NodeOptions & node_options)
  : Node("object_lanelet_filter_node", node_options),
    tf_buffer_(this->get_clock()),
    tf_listener_(tf_buffer_)
  {
    // Initialize filter settings
    filter_settings_.polygon_overlap_filter = this->declare_parameter<bool>("polygon_overlap_filter", true);
    filter_settings_.lanelet_direction_filter = this->declare_parameter<bool>("lanelet_direction_filter", true);
    filter_settings_.lanelet_direction_filter_velocity_yaw_threshold = this->declare_parameter<double>("lanelet_direction_filter_velocity_yaw_threshold", 0.5);
    filter_settings_.lanelet_direction_filter_object_speed_threshold = this->declare_parameter<double>("lanelet_direction_filter_object_speed_threshold", 1.0);
    filter_settings_.debug = this->declare_parameter<bool>("debug", false);
    filter_settings_.lanelet_extra_margin = this->declare_parameter<double>("lanelet_extra_margin", 0.5);
    filter_settings_.use_height_threshold = this->declare_parameter<bool>("use_height_threshold", false);
    filter_settings_.max_height_threshold = this->declare_parameter<double>("max_height_threshold", std::numeric_limits<double>::infinity());
    filter_settings_.min_height_threshold = this->declare_parameter<double>("min_height_threshold", -std::numeric_limits<double>::infinity());

    // Initialize filter target
    filter_target_ = utils::FilterTargetLabel(this->declare_parameter<std::string>("filter_target_label", "vehicle"));

    // Initialize subscriptions
    map_sub_ = this->create_subscription<autoware_map_msgs::msg::LaneletMapBin>(
      "input/lanelet_map", rclcpp::QoS{1}.transient_local(),
      std::bind(&ObjectLaneletFilterNode::mapCallback, this, std::placeholders::_1));

    object_sub_ = this->create_subscription<autoware_perception_msgs::msg::DetectedObjects>(
      "input/detected_objects", rclcpp::QoS{1},
      std::bind(&ObjectLaneletFilterNode::objectCallback, this, std::placeholders::_1));

    // Initialize publishers
    object_pub_ = this->create_publisher<autoware_perception_msgs::msg::DetectedObjects>(
      "output/detected_objects", rclcpp::QoS{1});

    viz_pub_ = this->create_publisher<visualization_msgs::msg::MarkerArray>(
      "debug/visualization", rclcpp::QoS{1});

    // Initialize debug and timing utilities
    if (filter_settings_.debug) {
      debug_publisher_ = std::make_unique<autoware::universe_utils::DebugPublisher>(this);
    }
    published_time_publisher_ = std::make_unique<autoware::universe_utils::PublishedTimePublisher>(this);
    stop_watch_ptr_ = std::make_unique<autoware::universe_utils::StopWatch<std::chrono::milliseconds>>(this);

    RCLCPP_INFO(this->get_logger(), "ObjectLaneletFilterNode initialized successfully.");
  }
ground_truth.cpp: |-
  ObjectLaneletFilterNode::ObjectLaneletFilterNode(const rclcpp::NodeOptions & node_options)
  : Node("object_lanelet_filter_node", node_options),
    tf_buffer_(this->get_clock()),
    tf_listener_(tf_buffer_)
  {
    using std::placeholders::_1;

    // Set parameters
    filter_target_.UNKNOWN = declare_parameter<bool>("filter_target_label.UNKNOWN");
    filter_target_.CAR = declare_parameter<bool>("filter_target_label.CAR");
    filter_target_.TRUCK = declare_parameter<bool>("filter_target_label.TRUCK");
    filter_target_.BUS = declare_parameter<bool>("filter_target_label.BUS");
    filter_target_.TRAILER = declare_parameter<bool>("filter_target_label.TRAILER");
    filter_target_.MOTORCYCLE = declare_parameter<bool>("filter_target_label.MOTORCYCLE");
    filter_target_.BICYCLE = declare_parameter<bool>("filter_target_label.BICYCLE");
    filter_target_.PEDESTRIAN = declare_parameter<bool>("filter_target_label.PEDESTRIAN");
    // Set filter settings
    filter_settings_.polygon_overlap_filter =
      declare_parameter<bool>("filter_settings.polygon_overlap_filter.enabled");
    filter_settings_.lanelet_direction_filter =
      declare_parameter<bool>("filter_settings.lanelet_direction_filter.enabled");
    filter_settings_.lanelet_direction_filter_velocity_yaw_threshold =
      declare_parameter<double>("filter_settings.lanelet_direction_filter.velocity_yaw_threshold");
    filter_settings_.lanelet_direction_filter_object_speed_threshold =
      declare_parameter<double>("filter_settings.lanelet_direction_filter.object_speed_threshold");
    filter_settings_.debug = declare_parameter<bool>("filter_settings.debug");
    filter_settings_.lanelet_extra_margin =
      declare_parameter<double>("filter_settings.lanelet_extra_margin");
    filter_settings_.use_height_threshold =
      declare_parameter<bool>("filter_settings.use_height_threshold");
    filter_settings_.max_height_threshold =
      declare_parameter<double>("filter_settings.max_height_threshold");
    filter_settings_.min_height_threshold =
      declare_parameter<double>("filter_settings.min_height_threshold");

    // Set publisher/subscriber
    map_sub_ = this->create_subscription<autoware_map_msgs::msg::LaneletMapBin>(
      "input/vector_map", rclcpp::QoS{1}.transient_local(),
      std::bind(&ObjectLaneletFilterNode::mapCallback, this, _1));
    object_sub_ = this->create_subscription<autoware_perception_msgs::msg::DetectedObjects>(
      "input/object", rclcpp::QoS{1}, std::bind(&ObjectLaneletFilterNode::objectCallback, this, _1));
    object_pub_ = this->create_publisher<autoware_perception_msgs::msg::DetectedObjects>(
      "output/object", rclcpp::QoS{1});

    debug_publisher_ =
      std::make_unique<autoware::universe_utils::DebugPublisher>(this, "object_lanelet_filter");
    published_time_publisher_ =
      std::make_unique<autoware::universe_utils::PublishedTimePublisher>(this);
    stop_watch_ptr_ =
      std::make_unique<autoware::universe_utils::StopWatch<std::chrono::milliseconds>>();
    if (filter_settings_.debug) {
      viz_pub_ = this->create_publisher<visualization_msgs::msg::MarkerArray>(
        "~/debug/marker", rclcpp::QoS{1});
    }
  }
