compilation.log: |
  Starting >>> autoware_probabilistic_occupancy_grid_map
  [1.626s] WARNING:colcon.colcon_cmake.task.cmake.build:Could not run installation step for package 'autoware_probabilistic_occupancy_grid_map' because it has no 'install' target
  Finished <<< autoware_probabilistic_occupancy_grid_map [0.22s]

  Summary: 1 package finished [1.59s]
generate_code.cpp: |-
  double logOddsFusion(const std::vector<double> & probabilities)
  {
      // Define a small epsilon value to prevent numerical instability
      const double EPSILON_PROB = 1e-6;

      // Initialize the log-odds sum
      double logOddsSum = 0.0;

      // Iterate through the probabilities and compute the log-odds sum
      for (const double &prob : probabilities)
      {
          // Clamp the probability to the range [EPSILON_PROB, 1 - EPSILON_PROB]
          double clampedProb = std::max(EPSILON_PROB, std::min(prob, 1.0 - EPSILON_PROB));

          // Convert probability to log-odds and add to the sum
          logOddsSum += std::log(clampedProb / (1.0 - clampedProb));
      }

      // Convert the fused log-odds back to a probability
      double fusedProbability = 1.0 / (1.0 + std::exp(-logOddsSum));

      return fusedProbability;
  }
ground_truth.cpp: |-
  double logOddsFusion(const std::vector<double> & probabilities)
  {
    double log_odds = 0.0;
    for (const auto & probability : probabilities) {
      const double p = std::max(EPSILON_PROB, std::min(1.0 - EPSILON_PROB, probability));
      log_odds += std::log(p / (1.0 - p));
    }
    return 1.0 / (1.0 + std::exp(-log_odds));
  }
