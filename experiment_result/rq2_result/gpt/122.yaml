compilation.log: |
  Starting >>> moveit_ros_planning
  Finished <<< moveit_ros_planning [0.69s]

  Summary: 1 package finished [1.29s]
generate_code.cpp: |-
  void CurrentStateMonitor::transformCallback(const tf2_msgs::msg::TFMessage::ConstSharedPtr& msg, const bool is_static)
  {
    try
    {
      // Iterate through all transforms in the message
      for (const auto& transform : msg->transforms)
      {
        // Extract the timestamp, frame_id, and child_frame_id
        const rclcpp::Time timestamp = transform.header.stamp;
        const std::string& frame_id = transform.header.frame_id;
        const std::string& child_frame_id = transform.child_frame_id;

        // Add the transform to the buffer
        if (is_static)
        {
          tf_buffer_->setTransform(transform, "default_authority", true); // Static transform
        }
        else
        {
          tf_buffer_->setTransform(transform, "default_authority", false); // Dynamic transform
        }

        // Log the transform addition for debugging purposes
        RCLCPP_DEBUG(LOGGER, "Added %s transform from '%s' to '%s' at time %.3f",
                     is_static ? "static" : "dynamic", frame_id.c_str(), child_frame_id.c_str(), timestamp.seconds());
      }
    }
    catch (const tf2::TransformException& ex)
    {
      // Log any exceptions encountered while processing the transform
      RCLCPP_WARN(LOGGER, "Failed to process transform: %s", ex.what());
    }

    // Update multi-dof joints after processing the transforms
    updateMultiDofJoints();
  }
ground_truth.cpp: |-
  void CurrentStateMonitor::transformCallback(const tf2_msgs::msg::TFMessage::ConstSharedPtr& msg, const bool is_static)
  {
    for (const auto& transform : msg->transforms)
    {
      try
      {
        tf_buffer_->setTransform(transform,
                                 is_static ? middleware_handle_->getStaticTfTopicName() :
                                             middleware_handle_->getDynamicTfTopicName(),
                                 is_static);
      }
      catch (tf2::TransformException& ex)
      {
        std::string temp = ex.what();
        RCLCPP_ERROR(LOGGER, "Failure to set received transform from %s to %s with error: %s\n",
                     transform.child_frame_id.c_str(), transform.header.frame_id.c_str(), temp.c_str());
      }
    }
    updateMultiDofJoints();
  }
