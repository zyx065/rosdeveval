compilation.log: |
  Starting >>> autoware_scenario_selector
  [Processing: autoware_scenario_selector]
  Finished <<< autoware_scenario_selector [45.2s]

  Summary: 1 package finished [46.5s]
generate_code.cpp: |-
  void ScenarioSelectorNode::onOdom(const nav_msgs::msg::Odometry::ConstSharedPtr msg)
  {
      // Update the current pose with the received odometry message
      current_pose_ = msg;

      // Create a TwistStamped message to store the twist data from the odometry message
      auto twist_msg = std::make_shared<geometry_msgs::msg::TwistStamped>();
      twist_msg->header = msg->header;  // Copy the header from the odometry message
      twist_msg->twist = msg->twist.twist;  // Copy the twist data from the odometry message

      // Update the twist_ member variable with the latest twist message
      twist_ = twist_msg;

      // Add the new twist message to the twist buffer
      twist_buffer_.push_back(twist_msg);

      // Remove old entries from the twist buffer that exceed the stopped time threshold
      while (!twist_buffer_.empty() &&
             (rclcpp::Time(twist_buffer_.front()->header.stamp) + rclcpp::Duration::from_seconds(th_stopped_time_sec_) < rclcpp::Time(twist_msg->header.stamp)))
      {
          twist_buffer_.pop_front();
      }
  }
ground_truth.cpp: |-
  void ScenarioSelectorNode::onOdom(const nav_msgs::msg::Odometry::ConstSharedPtr msg)
  {
    current_pose_ = msg;
    auto twist = std::make_shared<geometry_msgs::msg::TwistStamped>();
    twist->header = msg->header;
    twist->twist = msg->twist.twist;

    twist_ = twist;
    twist_buffer_.push_back(twist);

    // Delete old data in buffer
    while (true) {
      const auto time_diff =
        rclcpp::Time(msg->header.stamp) - rclcpp::Time(twist_buffer_.front()->header.stamp);

      if (time_diff.seconds() < th_stopped_time_sec_) {
        break;
      }

      twist_buffer_.pop_front();
    }
  }
