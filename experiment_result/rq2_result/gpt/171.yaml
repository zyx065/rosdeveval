compilation.log: |
  Starting >>> nav2_waypoint_follower
  --- stderr: nav2_waypoint_follower
  /root/repos/nav_ws/src/nav2_waypoint_follower/src/waypoint_follower.cpp: In member function ‘virtual nav2_util::CallbackReturn nav2_waypoint_follower::WaypointFollower::on_configure(const rclcpp_lifecycle::State&)’:
  /root/repos/nav_ws/src/nav2_waypoint_follower/src/waypoint_follower.cpp:62:46: error: no matching function for call to ‘rclcpp::executors::SingleThreadedExecutor::add_callback_group(rclcpp::CallbackGroup::SharedPtr&)’
     62 |   callback_group_executor_.add_callback_group(callback_group_);
        |   ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~~~~~~~
  In file included from /opt/ros/humble/include/rclcpp/rclcpp/executors/multi_threaded_executor.hpp:25,
                   from /opt/ros/humble/include/rclcpp/rclcpp/executors.hpp:21,
                   from /opt/ros/humble/include/rclcpp/rclcpp/rclcpp.hpp:155,
                   from /root/repos/nav_ws/install/nav2_util/include/nav2_util/node_thread.hpp:20,
                   from /root/repos/nav_ws/install/nav2_util/include/nav2_util/lifecycle_node.hpp:22,
                   from /root/repos/nav_ws/src/nav2_waypoint_follower/include/nav2_waypoint_follower/waypoint_follower.hpp:23,
                   from /root/repos/nav_ws/src/nav2_waypoint_follower/src/waypoint_follower.cpp:15:
  /opt/ros/humble/include/rclcpp/rclcpp/executor.hpp:105:3: note: candidate: ‘virtual void rclcpp::Executor::add_callback_group(rclcpp::CallbackGroup::SharedPtr, rclcpp::node_interfaces::NodeBaseInterface::SharedPtr, bool)’
    105 |   add_callback_group(
        |   ^~~~~~~~~~~~~~~~~~
  /opt/ros/humble/include/rclcpp/rclcpp/executor.hpp:105:3: note:   candidate expects 3 arguments, 1 provided
  In file included from /usr/include/x86_64-linux-gnu/c++/11/bits/c++allocator.h:33,
                   from /usr/include/c++/11/bits/allocator.h:46,
                   from /usr/include/c++/11/memory:64,
                   from /root/repos/nav_ws/src/nav2_waypoint_follower/include/nav2_waypoint_follower/waypoint_follower.hpp:18,
                   from /root/repos/nav_ws/src/nav2_waypoint_follower/src/waypoint_follower.cpp:15:
  /usr/include/c++/11/ext/new_allocator.h: In instantiation of ‘void __gnu_cxx::new_allocator<_Tp>::construct(_Up*, _Args&& ...) [with _Up = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}; _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>]’:
  /usr/include/c++/11/bits/alloc_traits.h:516:17:   required from ‘static void std::allocator_traits<std::allocator<_Tp1> >::construct(std::allocator_traits<std::allocator<_Tp1> >::allocator_type&, _Up*, _Args&& ...) [with _Up = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}; _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; std::allocator_traits<std::allocator<_Tp1> >::allocator_type = std::allocator<rclcpp_action::Client<nav2_msgs::action::NavigateToPose> >]’
  /usr/include/c++/11/bits/shared_ptr_base.h:519:39:   required from ‘std::_Sp_counted_ptr_inplace<_Tp, _Alloc, _Lp>::_Sp_counted_ptr_inplace(_Alloc, _Args&& ...) [with _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}; _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; _Alloc = std::allocator<rclcpp_action::Client<nav2_msgs::action::NavigateToPose> >; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr_base.h:650:16:   required from ‘std::__shared_count<_Lp>::__shared_count(_Tp*&, std::_Sp_alloc_shared_tag<_Alloc>, _Args&& ...) [with _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; _Alloc = std::allocator<rclcpp_action::Client<nav2_msgs::action::NavigateToPose> >; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr_base.h:1342:14:   required from ‘std::__shared_ptr<_Tp, _Lp>::__shared_ptr(std::_Sp_alloc_shared_tag<_Tp>, _Args&& ...) [with _Alloc = std::allocator<rclcpp_action::Client<nav2_msgs::action::NavigateToPose> >; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}; _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; __gnu_cxx::_Lock_policy _Lp = __gnu_cxx::_S_atomic]’
  /usr/include/c++/11/bits/shared_ptr.h:409:59:   required from ‘std::shared_ptr<_Tp>::shared_ptr(std::_Sp_alloc_shared_tag<_Tp>, _Args&& ...) [with _Alloc = std::allocator<rclcpp_action::Client<nav2_msgs::action::NavigateToPose> >; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}; _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>]’
  /usr/include/c++/11/bits/shared_ptr.h:862:14:   required from ‘std::shared_ptr<_Tp> std::allocate_shared(const _Alloc&, _Args&& ...) [with _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; _Alloc = std::allocator<rclcpp_action::Client<nav2_msgs::action::NavigateToPose> >; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}]’
  /usr/include/c++/11/bits/shared_ptr.h:878:39:   required from ‘std::shared_ptr<_Tp> std::make_shared(_Args&& ...) [with _Tp = rclcpp_action::Client<nav2_msgs::action::NavigateToPose>; _Args = {std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char (&)[17]}]’
  /root/repos/nav_ws/src/nav2_waypoint_follower/src/waypoint_follower.cpp:65:55:   required from here
  /usr/include/c++/11/ext/new_allocator.h:162:11: error: no matching function for call to ‘rclcpp_action::Client<nav2_msgs::action::NavigateToPose>::Client(std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>, std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>, const char [17])’
    162 |         { ::new((void *)__p) _Up(std::forward<_Args>(__args)...); }
        |           ^~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
  In file included from /opt/ros/humble/include/rclcpp_action/rclcpp_action/rclcpp_action.hpp:36,
                   from /root/repos/nav_ws/install/nav2_util/include/nav2_util/simple_action_server.hpp:26,
                   from /root/repos/nav_ws/src/nav2_waypoint_follower/include/nav2_waypoint_follower/waypoint_follower.hpp:27,
                   from /root/repos/nav_ws/src/nav2_waypoint_follower/src/waypoint_follower.cpp:15:
  /opt/ros/humble/include/rclcpp_action/rclcpp_action/client.hpp:392:3: note: candidate: ‘rclcpp_action::Client<ActionT>::Client(rclcpp::node_interfaces::NodeBaseInterface::SharedPtr, rclcpp::node_interfaces::NodeGraphInterface::SharedPtr, rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr, const string&, const rcl_action_client_options_t&) [with ActionT = nav2_msgs::action::NavigateToPose; rclcpp::node_interfaces::NodeBaseInterface::SharedPtr = std::shared_ptr<rclcpp::node_interfaces::NodeBaseInterface>; rclcpp::node_interfaces::NodeGraphInterface::SharedPtr = std::shared_ptr<rclcpp::node_interfaces::NodeGraphInterface>; rclcpp::node_interfaces::NodeLoggingInterface::SharedPtr = std::shared_ptr<rclcpp::node_interfaces::NodeLoggingInterface>; std::string = std::__cxx11::basic_string<char>; rcl_action_client_options_t = rcl_action_client_options_s]’
    392 |   Client(
        |   ^~~~~~
  /opt/ros/humble/include/rclcpp_action/rclcpp_action/client.hpp:396:25: note:   no known conversion for argument 4 from ‘std::shared_ptr<rclcpp::node_interfaces::NodeWaitablesInterface>’ to ‘const string&’ {aka ‘const std::__cxx11::basic_string<char>&’}
    396 |     const std::string & action_name,
        |     ~~~~~~~~~~~~~~~~~~~~^~~~~~~~~~~
  gmake[2]: *** [CMakeFiles/waypoint_follower_core.dir/build.make:76: CMakeFiles/waypoint_follower_core.dir/src/waypoint_follower.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:208: CMakeFiles/waypoint_follower_core.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< nav2_waypoint_follower [3.89s, exited with code 2]

  Summary: 0 packages finished [4.20s]
    1 package failed: nav2_waypoint_follower
    1 package had stderr output: nav2_waypoint_follower
generate_code.cpp: |-
  nav2_util::CallbackReturn
  WaypointFollower::on_configure(const rclcpp_lifecycle::State & /*state*/)
  {
    // Initialize parameters
    stop_on_failure_ = this->declare_parameter("stop_on_failure", true);
    loop_rate_ = this->declare_parameter("loop_rate", 10);
    waypoint_task_executor_id_ = this->declare_parameter("waypoint_task_executor_id", "default_executor");
    waypoint_task_executor_type_ = this->declare_parameter("waypoint_task_executor_type", "default_type");

    // Create callback group and executor
    callback_group_ = this->create_callback_group(rclcpp::CallbackGroupType::MutuallyExclusive);
    callback_group_executor_.add_callback_group(callback_group_);

    // Initialize action client for navigation to pose
    nav_to_pose_client_ = std::make_shared<ActionClient>(
      this->get_node_base_interface(),
      this->get_node_graph_interface(),
      this->get_node_logging_interface(),
      this->get_node_waitables_interface(),
      "navigate_to_pose");

    // Initialize action server for waypoint following
    action_server_ = std::make_unique<ActionServer>(
      this->get_node_base_interface(),
      this->get_node_clock_interface(),
      this->get_node_logging_interface(),
      this->get_node_waitables_interface(),
      "follow_waypoints",
      std::bind(&WaypointFollower::followWaypoints, this));

    // Log successful configuration
    RCLCPP_INFO(this->get_logger(), "WaypointFollower node configured successfully.");

    return nav2_util::CallbackReturn::SUCCESS;
  }
ground_truth.cpp: |-
  nav2_util::CallbackReturn
  WaypointFollower::on_configure(const rclcpp_lifecycle::State & /*state*/)
  {
    RCLCPP_INFO(get_logger(), "Configuring");

    auto node = shared_from_this();

    stop_on_failure_ = get_parameter("stop_on_failure").as_bool();
    loop_rate_ = get_parameter("loop_rate").as_int();
    waypoint_task_executor_id_ = get_parameter("waypoint_task_executor_plugin").as_string();

    callback_group_ = create_callback_group(
      rclcpp::CallbackGroupType::MutuallyExclusive,
      false);
    callback_group_executor_.add_callback_group(callback_group_, get_node_base_interface());

    nav_to_pose_client_ = rclcpp_action::create_client<ClientT>(
      get_node_base_interface(),
      get_node_graph_interface(),
      get_node_logging_interface(),
      get_node_waitables_interface(),
      "navigate_to_pose", callback_group_);

    action_server_ = std::make_unique<ActionServer>(
      get_node_base_interface(),
      get_node_clock_interface(),
      get_node_logging_interface(),
      get_node_waitables_interface(),
      "follow_waypoints", std::bind(&WaypointFollower::followWaypoints, this));

    try {
      waypoint_task_executor_type_ = nav2_util::get_plugin_type_param(
        this,
        waypoint_task_executor_id_);
      waypoint_task_executor_ = waypoint_task_executor_loader_.createUniqueInstance(
        waypoint_task_executor_type_);
      RCLCPP_INFO(
        get_logger(), "Created waypoint_task_executor : %s of type %s",
        waypoint_task_executor_id_.c_str(), waypoint_task_executor_type_.c_str());
      waypoint_task_executor_->initialize(node, waypoint_task_executor_id_);
    } catch (const pluginlib::PluginlibException & ex) {
      RCLCPP_FATAL(
        get_logger(),
        "Failed to create waypoint_task_executor. Exception: %s", ex.what());
    }

    return nav2_util::CallbackReturn::SUCCESS;
  }
