compilation.log: |
  Starting >>> autoware_planning_evaluator
  --- stderr: autoware_planning_evaluator
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp: In member function ‘void planning_diagnostics::PlanningEvaluatorNode::onTrajectory(autoware_planning_msgs::msg::Trajectory_<std::allocator<void> >::ConstSharedPtr, nav_msgs::msg::Odometry_<std::allocator<void> >::ConstSharedPtr)’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:305:23: error: request for member ‘name’ in ‘trajectory_metric’, which is of non-class type ‘planning_diagnostics::Metric’
    305 |     trajectory_metric.name = "trajectory_evaluation";
        |                       ^~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:308:53: error: ‘class planning_diagnostics::MetricsCalculator’ has no member named ‘ComputeLongitudinalMetrics’
    308 |     auto longitudinal_metrics = metrics_calculator_.ComputeLongitudinalMetrics(
        |                                                     ^~~~~~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:312:48: error: ‘class planning_diagnostics::MetricsCalculator’ has no member named ‘ComputeLateralMetrics’
    312 |     auto lateral_metrics = metrics_calculator_.ComputeLateralMetrics(
        |                                                ^~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:318:21: error: ‘class autoware::universe_utils::Accumulator<double>’ has no member named ‘Update’
    318 |         metric_stat.Update(long_metric.value);
        |                     ^~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_planning_evaluator/src/planning_evaluator_node.cpp:328:21: error: ‘class autoware::universe_utils::Accumulator<double>’ has no member named ‘Update’
    328 |         metric_stat.Update(lat_metric.value);
        |                     ^~~~~~
  gmake[2]: *** [CMakeFiles/planning_evaluator_node.dir/build.make:174: CMakeFiles/planning_evaluator_node.dir/src/planning_evaluator_node.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:161: CMakeFiles/planning_evaluator_node.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_planning_evaluator [13.8s, exited with code 2]

  Summary: 0 packages finished [15.2s]
    1 package failed: autoware_planning_evaluator
    1 package had stderr output: autoware_planning_evaluator
generate_code.cpp: |
  void PlanningEvaluatorNode::onTrajectory(
    const Trajectory::ConstSharedPtr traj_msg, const Odometry::ConstSharedPtr ego_state_ptr)
  {
      // Check if trajectory and ego state are valid
      if (!traj_msg || !ego_state_ptr) {
          RCLCPP_WARN(get_logger(), "Received invalid trajectory or ego state");
          return;
      }

      // Reset metrics for new trajectory evaluation
      metrics_.clear();

      // Compute trajectory metrics using metrics calculator
      Metric trajectory_metric;
      trajectory_metric.name = "trajectory_evaluation";

      // Calculate longitudinal metrics
      auto longitudinal_metrics = metrics_calculator_.ComputeLongitudinalMetrics(
          *traj_msg, *ego_state_ptr);
      
      // Calculate lateral metrics
      auto lateral_metrics = metrics_calculator_.ComputeLateralMetrics(
          *traj_msg, *ego_state_ptr);

      // Accumulate and process metrics
      for (const auto& long_metric : longitudinal_metrics) {
          Accumulator<double> metric_stat;
          metric_stat.Update(long_metric.value);
          
          if (output_metrics_) {
              AddMetricMsg(long_metric, metric_stat);
          }
          metrics_.push_back(long_metric);
      }

      for (const auto& lat_metric : lateral_metrics) {
          Accumulator<double> metric_stat;
          metric_stat.Update(lat_metric.value);
          
          if (output_metrics_) {
              AddMetricMsg(lat_metric, metric_stat);
          }
          metrics_.push_back(lat_metric);
      }

      // Optional: Log or publish metrics
      if (!metrics_.empty()) {
          RCLCPP_INFO(get_logger(), "Trajectory metrics computed successfully");
      }
  }
ground_truth.cpp: |-
  void PlanningEvaluatorNode::onTrajectory(
    const Trajectory::ConstSharedPtr traj_msg, const Odometry::ConstSharedPtr ego_state_ptr)
  {
    if (!ego_state_ptr || !traj_msg) {
      return;
    }

    auto start = now();

    for (Metric metric : metrics_) {
      const auto metric_stat = metrics_calculator_.calculate(Metric(metric), *traj_msg);
      if (!metric_stat) {
        continue;
      }

      if (output_metrics_) {
        metric_accumulators_[static_cast<size_t>(metric)][0].add(metric_stat->min());
        metric_accumulators_[static_cast<size_t>(metric)][1].add(metric_stat->max());
        metric_accumulators_[static_cast<size_t>(metric)][2].add(metric_stat->mean());
      }

      if (metric_stat->count() > 0) {
        AddMetricMsg(metric, *metric_stat);
      }
    }

    metrics_calculator_.setPreviousTrajectory(*traj_msg);
    auto runtime = (now() - start).seconds();
    RCLCPP_DEBUG(get_logger(), "Planning evaluation calculation time: %2.2f ms", runtime * 1e3);
  }
architecture-codes: 
- ROS Logger Issues - Inappropriate Log Level Usage
functionality-codes:
- Reference Error - Undefined name
- Incomplete Code - Missing Multiple Steps
- ROS Message/Service Usage Issues - Message Operation Issues
- Conditional Checks Issues - Conditional Check Logic Misapplication
- Operation/Calculation Error - Incorrect arithmetic operation
root-cause-codes:
- Deficiencies in Domain Knowledge - Lack of familiarity with the existing codebase
- Inadequate Comprehension of Functional Logic - Inadequate Understanding of Task Logic