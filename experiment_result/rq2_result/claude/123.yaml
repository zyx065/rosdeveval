compilation.log: |
  Starting >>> moveit_servo
  Finished <<< moveit_servo [0.62s]

  Summary: 1 package finished [1.30s]
generate_code.cpp: |
  void PoseTracking::targetPoseCallback(const geometry_msgs::msg::PoseStamped::ConstSharedPtr& msg)
  {
      std::lock_guard<std::mutex> lock(target_pose_mtx_);
      
      try 
      {
          // Transform the incoming pose to the planning frame
          geometry_msgs::msg::PoseStamped transformed_pose;
          transform_buffer_.transform(*msg, transformed_pose, planning_frame_);
          
          // Store the transformed pose as the new target
          target_pose_ = transformed_pose;
          
          RCLCPP_DEBUG(LOGGER, "Updated target pose in frame: %s", planning_frame_.c_str());
      }
      catch (const tf2::TransformException& ex)
      {
          RCLCPP_WARN(LOGGER, "Failed to transform target pose to planning frame '%s': %s", 
                      planning_frame_.c_str(), ex.what());
      }
  }
ground_truth.cpp: |-
  void PoseTracking::targetPoseCallback(const geometry_msgs::msg::PoseStamped::ConstSharedPtr& msg)
  {
    std::lock_guard<std::mutex> lock(target_pose_mtx_);
    target_pose_ = *msg;
    // If the target pose is not defined in planning frame, transform the target pose.
    if (target_pose_.header.frame_id != planning_frame_)
    {
      try
      {
        geometry_msgs::msg::TransformStamped target_to_planning_frame = transform_buffer_.lookupTransform(
            planning_frame_, target_pose_.header.frame_id, rclcpp::Time(0), rclcpp::Duration(100ms));
        tf2::doTransform(target_pose_, target_pose_, target_to_planning_frame);

        // Prevent doTransform from copying a stamp of 0, which will cause the haveRecentTargetPose check to fail servo motions
        target_pose_.header.stamp = node_->now();
      }
      catch (const tf2::TransformException& ex)
      {
        RCLCPP_WARN_STREAM(LOGGER, ex.what());
        return;
      }
    }
  }
architecture-codes:
  - ROS Message Related Issues - Message Operation Issues
  - ROS Timer Issues - Timestamp Processing Missing
  - ROS Logger Issues - Inappropriate Log Level Usage
functionality-codes:
  - Conditional Checks Issues - Conditional Check Missing
  - Incomplete Code - Missing Multiple Steps
  - Operation/Calculation Error - Incorrect comparison operation
root-cause-codes:
  - Inadequate Comprehension of Functional Logic - Inadequate Understanding of Task Logic
  - Deficiencies in Domain Knowledge - Insufficient understanding of ROS Programming
  - Deficiencies in Domain Knowledge - Lack of ROS development best practices
  - Weakness in System-Level Integration - Unclear of ROS computation graph