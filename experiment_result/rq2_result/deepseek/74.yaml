compilation.log: |
  Starting >>> autoware_perception_online_evaluator
  --- stderr: autoware_perception_online_evaluator
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp: In member function ‘autoware::perception_diagnostics::MetricStatMap autoware::perception_diagnostics::MetricsCalculator::calcYawRateMetrics(const ClassObjectsMap&) const’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:423:10: error: ‘shouldCalculateYawRate’ was not declared in this scope
    423 |     if (!shouldCalculateYawRate(label)) {
        |          ^~~~~~~~~~~~~~~~~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: error: no matching function for call to ‘begin(const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >&)’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/bits/range_access.h:36,
                   from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/initializer_list:90:5: note: candidate: ‘template<class _Tp> constexpr const _Tp* std::begin(std::initializer_list<_Tp>)’
     90 |     begin(initializer_list<_Tp> __ils) noexcept
        |     ^~~~~
  /usr/include/c++/11/initializer_list:90:5: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   ‘autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ is not derived from ‘std::initializer_list<_Tp>’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/bits/range_access.h:51:5: note: candidate: ‘template<class _Container> constexpr decltype (__cont.begin()) std::begin(_Container&)’
     51 |     begin(_Container& __cont) -> decltype(__cont.begin())
        |     ^~~~~
  /usr/include/c++/11/bits/range_access.h:51:5: note:   template argument deduction/substitution failed:
  /usr/include/c++/11/bits/range_access.h: In substitution of ‘template<class _Container> constexpr decltype (__cont.begin()) std::begin(_Container&) [with _Container = const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >]’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32:   required from here
  /usr/include/c++/11/bits/range_access.h:51:50: error: ‘const struct autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ has no member named ‘begin’
     51 |     begin(_Container& __cont) -> decltype(__cont.begin())
        |                                           ~~~~~~~^~~~~
  /usr/include/c++/11/bits/range_access.h:61:5: note: candidate: ‘template<class _Container> constexpr decltype (__cont.begin()) std::begin(const _Container&)’
     61 |     begin(const _Container& __cont) -> decltype(__cont.begin())
        |     ^~~~~
  /usr/include/c++/11/bits/range_access.h:61:5: note:   template argument deduction/substitution failed:
  /usr/include/c++/11/bits/range_access.h: In substitution of ‘template<class _Container> constexpr decltype (__cont.begin()) std::begin(const _Container&) [with _Container = autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >]’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32:   required from here
  /usr/include/c++/11/bits/range_access.h:61:56: error: ‘const struct autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ has no member named ‘begin’
     61 |     begin(const _Container& __cont) -> decltype(__cont.begin())
        |                                                 ~~~~~~~^~~~~
  /usr/include/c++/11/bits/range_access.h:90:5: note: candidate: ‘template<class _Tp, long unsigned int _Nm> constexpr _Tp* std::begin(_Tp (&)[_Nm])’
     90 |     begin(_Tp (&__arr)[_Nm]) noexcept
        |     ^~~~~
  /usr/include/c++/11/bits/range_access.h:90:5: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   mismatched types ‘_Tp [_Nm]’ and ‘const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/bits/range_access.h:107:31: note: candidate: ‘template<class _Tp> _Tp* std::begin(std::valarray<_Tp>&)’
    107 |   template<typename _Tp> _Tp* begin(valarray<_Tp>&) noexcept;
        |                               ^~~~~
  /usr/include/c++/11/bits/range_access.h:107:31: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   types ‘std::valarray<_Tp>’ and ‘const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ have incompatible cv-qualifiers
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/bits/range_access.h:108:37: note: candidate: ‘template<class _Tp> const _Tp* std::begin(const std::valarray<_Tp>&)’
    108 |   template<typename _Tp> const _Tp* begin(const valarray<_Tp>&) noexcept;
        |                                     ^~~~~
  /usr/include/c++/11/bits/range_access.h:108:37: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   ‘const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ is not derived from ‘const std::valarray<_Tp>’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: error: no matching function for call to ‘end(const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >&)’
  In file included from /usr/include/c++/11/bits/range_access.h:36,
                   from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/initializer_list:101:5: note: candidate: ‘template<class _Tp> constexpr const _Tp* std::end(std::initializer_list<_Tp>)’
    101 |     end(initializer_list<_Tp> __ils) noexcept
        |     ^~~
  /usr/include/c++/11/initializer_list:101:5: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   ‘autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ is not derived from ‘std::initializer_list<_Tp>’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/bits/range_access.h:71:5: note: candidate: ‘template<class _Container> constexpr decltype (__cont.end()) std::end(_Container&)’
     71 |     end(_Container& __cont) -> decltype(__cont.end())
        |     ^~~
  /usr/include/c++/11/bits/range_access.h:71:5: note:   template argument deduction/substitution failed:
  /usr/include/c++/11/bits/range_access.h: In substitution of ‘template<class _Container> constexpr decltype (__cont.end()) std::end(_Container&) [with _Container = const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >]’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32:   required from here
  /usr/include/c++/11/bits/range_access.h:71:48: error: ‘const struct autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ has no member named ‘end’
     71 |     end(_Container& __cont) -> decltype(__cont.end())
        |                                         ~~~~~~~^~~
  /usr/include/c++/11/bits/range_access.h:81:5: note: candidate: ‘template<class _Container> constexpr decltype (__cont.end()) std::end(const _Container&)’
     81 |     end(const _Container& __cont) -> decltype(__cont.end())
        |     ^~~
  /usr/include/c++/11/bits/range_access.h:81:5: note:   template argument deduction/substitution failed:
  /usr/include/c++/11/bits/range_access.h: In substitution of ‘template<class _Container> constexpr decltype (__cont.end()) std::end(const _Container&) [with _Container = autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >]’:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32:   required from here
  /usr/include/c++/11/bits/range_access.h:81:54: error: ‘const struct autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ has no member named ‘end’
     81 |     end(const _Container& __cont) -> decltype(__cont.end())
        |                                               ~~~~~~~^~~
  /usr/include/c++/11/bits/range_access.h:100:5: note: candidate: ‘template<class _Tp, long unsigned int _Nm> constexpr _Tp* std::end(_Tp (&)[_Nm])’
    100 |     end(_Tp (&__arr)[_Nm]) noexcept
        |     ^~~
  /usr/include/c++/11/bits/range_access.h:100:5: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   mismatched types ‘_Tp [_Nm]’ and ‘const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/bits/range_access.h:109:31: note: candidate: ‘template<class _Tp> _Tp* std::end(std::valarray<_Tp>&)’
    109 |   template<typename _Tp> _Tp* end(valarray<_Tp>&) noexcept;
        |                               ^~~
  /usr/include/c++/11/bits/range_access.h:109:31: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   types ‘std::valarray<_Tp>’ and ‘const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ have incompatible cv-qualifiers
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  In file included from /usr/include/c++/11/string:54,
                   from /usr/include/c++/11/bits/locale_classes.h:40,
                   from /usr/include/c++/11/bits/ios_base.h:41,
                   from /usr/include/c++/11/ios:42,
                   from /usr/include/c++/11/ostream:38,
                   from /usr/include/c++/11/iostream:39,
                   from /workspace/repos/autoware/install/autoware_universe_utils/include/autoware/universe_utils/math/accumulator.hpp:15,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/metric.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/parameters.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics/detection_count.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/include/autoware/perception_online_evaluator/metrics_calculator.hpp:18,
                   from /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:15:
  /usr/include/c++/11/bits/range_access.h:110:37: note: candidate: ‘template<class _Tp> const _Tp* std::end(const std::valarray<_Tp>&)’
    110 |   template<typename _Tp> const _Tp* end(const valarray<_Tp>&) noexcept;
        |                                     ^~~
  /usr/include/c++/11/bits/range_access.h:110:37: note:   template argument deduction/substitution failed:
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:429:32: note:   ‘const autoware_perception_msgs::msg::PredictedObjects_<std::allocator<void> >’ is not derived from ‘const std::valarray<_Tp>’
    429 |     for (const auto & object : objects) {
        |                                ^~~~~~~
  /workspace/repos/autoware/src/universe/autoware.universe/evaluator/autoware_perception_online_evaluator/src/metrics_calculator.cpp:453:19: error: no match for call to ‘(std::unordered_map<std::__cxx11::basic_string<char>, autoware::universe_utils::Accumulator<double> >::mapped_type {aka autoware::universe_utils::Accumulator<double>}) (const double&)’
    453 |       metrics[key](yaw_rate);
        |       ~~~~~~~~~~~~^~~~~~~~~~
  gmake[2]: *** [CMakeFiles/autoware_perception_online_evaluator.dir/build.make:76: CMakeFiles/autoware_perception_online_evaluator.dir/src/metrics_calculator.cpp.o] Error 1
  gmake[1]: *** [CMakeFiles/Makefile2:159: CMakeFiles/autoware_perception_online_evaluator.dir/all] Error 2
  gmake: *** [Makefile:146: all] Error 2
  ---
  Failed   <<< autoware_perception_online_evaluator [11.0s, exited with code 2]

  Summary: 0 packages finished [12.4s]
    1 package failed: autoware_perception_online_evaluator
    1 package had stderr output: autoware_perception_online_evaluator
generate_code.cpp: |-
  MetricStatMap MetricsCalculator::calcYawRateMetrics(const ClassObjectsMap & class_objects_map) const
  {
    MetricStatMap metrics;

    for (const auto & [label, objects] : class_objects_map) {
      // Skip if this class shouldn't be checked for yaw rate
      if (!shouldCalculateYawRate(label)) {
        continue;
      }

      const auto label_str = autoware::object_recognition_utils::convertLabelToString(label);

      for (const auto & object : objects) {
        const auto & uuid = object.object_id;
        const auto & stamp = object.header.stamp;

        // Get previous object state if available
        const auto prev_object = getPreviousObjectByStamp(uuid, stamp);
        if (!prev_object) {
          continue;
        }

        // Calculate time difference in seconds
        const double dt = (stamp - prev_object->first).seconds();
        if (dt <= 0.0) {
          continue;
        }

        // Calculate yaw rate (rad/s)
        const double current_yaw = tf2::getYaw(object.kinematics.initial_pose_with_covariance.pose.orientation);
        const double prev_yaw = tf2::getYaw(prev_object->second.kinematics.initial_pose_with_covariance.pose.orientation);
        const double yaw_diff = autoware::universe_utils::normalizeRadian(current_yaw - prev_yaw);
        const double yaw_rate = yaw_diff / dt;

        // Store metrics for this object class
        const std::string key = "yaw_rate_" + label_str;
        metrics[key](yaw_rate);
      }
    }

    return metrics;
  }
ground_truth.cpp: |-
  MetricStatMap MetricsCalculator::calcYawRateMetrics(const ClassObjectsMap & class_objects_map) const
  {
    // calculate yaw rate for each object

    MetricStatMap metric_stat_map{};
    for (const auto & [label, objects] : class_objects_map) {
      Accumulator<double> stat{};
      const auto stamp = rclcpp::Time(objects.header.stamp);

      for (const auto & object : objects.objects) {
        const auto uuid = autoware::universe_utils::toHexString(object.object_id);
        if (!hasPassedTime(uuid, stamp)) {
          continue;
        }
        const auto previous_object_with_stamp_opt = getPreviousObjectByStamp(uuid, stamp);
        if (!previous_object_with_stamp_opt.has_value()) {
          continue;
        }
        const auto [previous_stamp, previous_object] = previous_object_with_stamp_opt.value();

        const double time_diff = (stamp - previous_stamp).seconds();
        if (time_diff < 0.01) {
          continue;
        }
        const double current_yaw =
          tf2::getYaw(object.kinematics.initial_pose_with_covariance.pose.orientation);
        const double previous_yaw =
          tf2::getYaw(previous_object.kinematics.initial_pose_with_covariance.pose.orientation);
        // Calculate the absolute difference between current_yaw and previous_yaw
        const double yaw_diff =
          std::abs(autoware::universe_utils::normalizeRadian(current_yaw - previous_yaw));
        // The yaw difference is flipped if the angle is larger than 90 degrees
        const double yaw_diff_flip_fixed = std::min(yaw_diff, M_PI - yaw_diff);
        const double yaw_rate = yaw_diff_flip_fixed / time_diff;
        stat.add(yaw_rate);
      }
      metric_stat_map["yaw_rate_" + convertLabelToString(label)] = stat;
    }
    return metric_stat_map;
  }
architecture-codes:
  - ROS Message Issue - Incorrect Message Member Access Issue
  - ROS Message Issue - Message Operation Issue

functionality-codes:
  - Incomplete Code Issue - Missing Multiple Steps Issue
  - Condition Issue - Condition Check Logic Misapplication Issue
  - Operation/Calculation Issue - Algorithmic State and Initialization Issue

root-cause-codes:
  - Inadequate Comprehension of Functional Logic - Inadequate Understanding of Task Logic
  - Deficiencies in Domain Knowledge - Insufficient understanding of ROS Programming
  - Deficiencies in Domain Knowledge - Lack of Knowledge of Domain-Specific Libraries
  - Weakness in System-Level Integration - Lack of familiarity with the existing codebase