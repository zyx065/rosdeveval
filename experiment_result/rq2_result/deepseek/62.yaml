compilation.log: |
  Starting >>> autoware_velocity_smoother
  [Processing: autoware_velocity_smoother]
  Finished <<< autoware_velocity_smoother [55.4s]

  Summary: 1 package finished [56.7s]
generate_code.cpp: |-
  void VelocitySmootherNode::publishStopDistance(const TrajectoryPoints & trajectory) const
  {
    // Find the nearest stop point in the trajectory
    const auto stop_idx_opt = autoware::motion_utils::searchZeroVelocityIndex(trajectory);
    if (!stop_idx_opt) {
      return;  // No stop point found
    }

    // Find the nearest point to ego vehicle in the trajectory
    const size_t ego_idx = findNearestIndexFromEgo(trajectory);

    // Calculate the signed arc length from ego to stop point
    const double dist_to_stop = autoware::motion_utils::calcSignedArcLength(
      trajectory, ego_idx, *stop_idx_opt);

    // Publish the distance
    Float32Stamped msg;
    msg.stamp = this->now();
    msg.data = dist_to_stop;
    pub_dist_to_stopline_->publish(msg);
  }
ground_truth.cpp: |-
  void VelocitySmootherNode::publishStopDistance(const TrajectoryPoints & trajectory) const
  {
    const size_t closest = findNearestIndexFromEgo(trajectory);

    // stop distance calculation
    const double stop_dist_lim{50.0};
    double stop_dist{stop_dist_lim};
    const auto stop_idx{autoware::motion_utils::searchZeroVelocityIndex(trajectory)};
    if (stop_idx) {
      stop_dist = autoware::motion_utils::calcSignedArcLength(trajectory, closest, *stop_idx);
    } else {
      stop_dist = closest > 0 ? stop_dist : -stop_dist;
    }
    Float32Stamped dist_to_stopline{};
    dist_to_stopline.stamp = this->now();
    dist_to_stopline.data = std::clamp(stop_dist, -stop_dist_lim, stop_dist_lim);
    pub_dist_to_stopline_->publish(dist_to_stopline);
  }
architecture-codes:
  - ROS Logger Issue - ROS Logger Missing Issue

functionality-codes:
  - Condition Issue - Conditional Check Missing Issue
  - Incomplete Code Issue - Missing Multiple Steps Issue 
  - Constant Value Issue 
  - Condition Issue - Condition Check Logic Misapplication Issue 

root-cause-codes:
  - Inadequate Comprehension of Functional Logic - Inadequate Understanding of System Requirements
  - Deficiencies in Domain Knowledge - Lack of ROS development best practices 
  - Inadequate Comprehension of Functional Logic - Inadequate Understanding of Task Logic 